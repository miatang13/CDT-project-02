{"version":3,"sources":["pages/Data.js","pages/FetchData.js","webgl/constants/colors.js","webgl/helper/rand.js","webgl/glsl/bg.glsl.js","webgl/constants/positions.js","webgl/class/Movie.js","webgl/glsl/box.glsl.js","webgl/webgl-app.js","utility/file.js","components/Navbar.js","utility/snippetPositions.js","pages/Main.js","pages/ParseData.js","components/EmptyAnalysis.js","pages/Analysis.js","pages/Info.js","pages/Catalog.js","App.js","reducers/cart.js","store.js","index.js"],"names":["Data","to","FetchData","btnRef","useRef","useState","downloadHref","setDownloadHref","dataJson","setData","className","ref","href","onClick","textFile","Blob","JSON","stringify","type","URL","createObjectURL","current","download","TextFile","imdbid","endIdx","Math","min","data","length","i","fetch","method","headers","then","response","json","console","log","Response","orig","push","catch","err","error","response_data","query","Title","find","d","title","rated_colors","G","Color","PG","R","Default","rand","items","random","posterPositions","xPositions","yPositions","w","h","Movie","movieObjs","loaders","genreObjs","font","scene","this","container","Object3D","posters","initPosters","add","posterObjs","planes","sortByBoxOffice","sort","a","b","boxOfficeInt","sortByTime","parseInt","year","curPos","forEach","movie","index","yIndex","findIndex","el","name","xIndex","x","y","posterMesh","initPoster","position","set","plane","initPlane","genreObj","genre","clone","geometry","TextGeometry","size","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","material","MeshNormalMaterial","color","Mesh","initShaderPoster","imgLink","PlaneGeometry","texture","textureLoader","load","ShaderMaterial","vertexShader","fragmentShader","uniforms","u_time","value","uTexture","side","DoubleSide","obj","map","SpriteMaterial","sprite","Sprite","scale","planeColor","rated","u_color_r","r","u_color_g","g","u_color_b","mesh","castShadow","receiveShadow","rotationDir","rotation","models","finalGenres","WebGLApp","cssContainer","nameSpan","callback","setup","Scene","background","camera","PerspectiveCamera","window","innerWidth","innerHeight","lookAt","tanFOV","tan","PI","fov","renderer","WebGLRenderer","antialias","setSize","setClearColor","shadowMap","enabled","cssRenderer","CSS3DRenderer","domElement","style","top","cssElem","appendChild","htmlElem","loader","GLTFLoader","controls","OrbitControls","update","TextureLoader","clock","Clock","createCube","createLights","loadMovieGenreObjs","initPostprocessing","updateState","objs","animateDir","clearState","createNewState","movieGenreObjs","init","movieObj","animateY","gsap","ease","duration","that","tl","timeline","onComplete","remove","children","target","createText","textGeometry","text","computeBoundingBox","center","textGroup","test","Group","fontLoader","loadFont","FontLoader","xhr","mod","loadModel","composer","EffectComposer","renderPass","RenderPass","addPass","luminosityPass","ShaderPass","LuminosityShader","effectFXAA","FXAAShader","renderToScreen","fileName","loaded","model","scenes","Object","keys","hasSetup","onloadCallback","BoxGeometry","MeshPhongMaterial","wireframe","cube","ambientLight","AmbientLight","pointLight","PointLight","renderScene","render","handleResize","width","clientWidth","clientHeight","aspect","updateProjectionMatrix","z","poster","getElapsedTime","rafId","requestAnimationFrame","isRendering","cancelAnimationFrame","baseUrl","NavigationBar","props","Nav","borderBottom","activeKey","Item","snippetPositions","marginLeft","marginTop","Main","isLoading","setLoad","loadScreenRef","hasSetupSnippets","setSnippets","useEffect","textWrapper","document","querySelector","innerHTML","textContent","replace","anime","loop","targets","translateY","translateZ","delay","max_index","complete_data","directorIdx","location","undefined","localStorage","setItem","getItem","parse","currentIdx","setIdx","containerRef","cssContainerRef","webglApp","directorNameRef","cart","getWebglParams","new_index","movies","first_genre","Genre","substr","indexOf","Poster","Rated","Year","boxOffice","BoxOffice","BoxOfficeInt","updateDirector","e","svg_animate","translate_target","direction","key","getElementById","max","fill","handleUpdateState","alert","addEventListener","onWindowResize","removeEventListener","showNYT","setShowNYT","snippets","getElementsByClassName","opacity","snippet","id","backgroundColor","NYT_articles","article","rel","web_url","xmlns","viewBox","marginBottom","fontSize","idx","newDirector","newCart","updateCart","display","complete","ParseData","outputJson","setOutputJson","directors","movie_data","imdbID","queryId","slice","bechdel","bechdel_data","rating","director","Director","movieCnt","ratingSum","avgRating","directorArr","directorObj","dir1","dir2","missingBoxOffice","directors_data","NYT_data","final_directors","finalData","dirObj","new_obj","stories","new_data","dir_w_NYT","dir","avg","mov","finalStr","substring","num","boxOfficeAvg","floor","sortedByYear","e1","e2","sortedByBoxOffice","sortedMovies","final_data","newObj","unsortedIndex","genres","count","EmptyAnalysis","Analysis","initialCart","cartData","setCart","getRecommendations","recommendations","initialRecs","recs","setRecs","detailsSvgParams","marginRight","buttonStyle","Container","fluid","Row","item","Col","sm","Card","borderColor","Body","Text","Intl","NumberFormat","format","Carousel","interval","indicators","src","alt","Accordion","eventKey","Header","Awards","Released","Footer","Button","directorName","filter","handleRemove","textAlign","new_recs","rec","newTo","pathname","Info","Catalog","sortByBO","setSort","displayData","sortedData","lastMovieCnt","nameJsx","md","fillRule","finalJsx","App","exact","path","component","cartSlice","createSlice","initialState","reducers","state","action","payload","actions","configureStore","reducer","cartReducer","store"],"mappings":"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","file":"static/js/main.f0357efd.chunk.js","sourcesContent":["import { Link } from \"react-router-dom\";\n\nexport default function Data() {\n  return (\n    <div>\n      <h1> Data </h1>\n      <Link to=\"/fetch-data\"> Fetch Data Page </Link>\n      <Link to=\"/parse-data\"> Parse Data Page </Link>\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport data from \"../data/not-using/bechdel-test-2010-onwards.json\";\nimport response_data from \"../data/not-using/response(all).json\";\n//import data from \"./data/bechdel-test-test.json\";\n\nexport default function FetchData() {\n  const btnRef = useRef();\n  const [downloadHref, setDownloadHref] = useState();\n  const [dataJson, setData] = useState([]);\n\n  const outputJson = () => {\n    //https://stackoverflow.com/questions/65903776/how-to-read-and-write-to-local-json-files-from-react-js\n    const TextFile = () => {\n      const textFile = new Blob([[JSON.stringify(dataJson)]], {\n        type: \"application/json\",\n      });\n      setDownloadHref(URL.createObjectURL(textFile));\n      btnRef.current.download = \"data.json\";\n    };\n\n    TextFile();\n  };\n\n  const fetchData = (imdbid) => {\n    let fetchLink =\n      \"https://movie-database-imdb-alternative.p.rapidapi.com/?i=tt\" +\n      imdbid +\n      \"&r=json&page=1\";\n    fetch(fetchLink, {\n      method: \"GET\",\n      headers: {\n        \"x-rapidapi-host\": \"movie-database-imdb-alternative.p.rapidapi.com\",\n        \"x-rapidapi-key\": \"027cff5cbfmsh439002e33664b4ap1c34c7jsn8622e3b4d4ca\",\n      },\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(data);\n        if (data.Response === \"False\") {\n          console.log(\"invalid data\");\n          return;\n        }\n        let orig = dataJson;\n        orig.push(data);\n        setData(orig);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  };\n\n  const fetchAllData = () => {\n    const startIdx = 2500;\n    const endIdx = Math.min(3516, data.length);\n    for (let i = startIdx; i < endIdx; i++) {\n      fetchData(data[i].imdbid);\n    }\n  };\n\n  const fetchSingleData = () => {\n    const i = 199;\n    console.log(data[i]);\n    //fetchData(data[i].imdbid);\n  };\n\n  const checkData = () => {\n    console.log(\"Bechdel data length\", data.length);\n    console.log(\"Response data length\", response_data.length);\n    for (const response in response_data) {\n      const query = response_data[response].Title;\n      let f = data.find((d) => (d.title = query));\n      // console.log(query, f);\n      if (!f) {\n        console.log(\"Can't find title\", query, response_data[response]);\n      }\n    }\n  };\n\n  return (\n    <div className=\"FetchDataPage\">\n      <a ref={btnRef} href={downloadHref} onClick={outputJson}>\n        Download file\n      </a>\n      <button onClick={fetchAllData}> fetch data</button>\n      <button onClick={fetchSingleData}> fetch single data</button>\n      <button onClick={checkData}> check data</button>\n    </div>\n  );\n}\n","import { Color } from \"three\";\n\nexport const rated_colors = {\n  G: new Color(0xc4d0ff),\n  PG: new Color(0x8da4ff),\n  \"PG-13\": new Color(0xa4d9ff),\n  R: new Color(0x33cfde),\n  \"NC-17\": new Color(0x67d0fd),\n  \"TV-MA\": new Color(0x30aade),\n  \"TV-G\": new Color(0xbcebff),\n  Default: new Color(0x7c71fe),\n};\n","export function rand(items) {\n  // \"~~\" for a closest \"int\"\n  return items[~~(items.length * Math.random())];\n}\n","export const vshader = `\nvarying vec2 v_uv;\nvarying float v_wave;\nuniform float u_time;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v) {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n  \n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n  \n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n  \n  // Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n           \n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n  \n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  \n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\nvoid main() {\t\n  v_uv = uv;\n  vec3 pos = position;\n  float noiseFreq = 3.5;\n  float noiseAmp = 0.15; \n  vec3 noisePos = vec3(pos.x * noiseFreq + u_time, pos.y, pos.z);\n  pos.z += snoise(noisePos) * noiseAmp;\n  v_wave = pos.z;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0 );\n}\n`;\n\nexport const fshader = `\nuniform sampler2D uTexture;\nvarying vec2 v_uv;\nvarying float v_wave;\n\nvoid main (void)\n{\n  // these 2 lines work\n  // vec3 mapped = texture2D(uTexture, v_uv ).rgb;\n  // gl_FragColor = vec4(mapped, 1); \n\n  float wave = v_wave * 0.25;\n  float r = texture2D(uTexture, v_uv).r * 0.7;\n  float g = texture2D(uTexture, v_uv + wave/2.0).g * 0.5;\n  float b = texture2D(uTexture, v_uv + wave).b * 2.0;\n  vec3 texture = vec3(r, g, b);\n  gl_FragColor = vec4(texture, 1.0);\n}\n`;\n","// different positions for different numbers of posters\nconst pos_6 = {\n  xPositions: [-19, -12, -5, 2, 9, 18],\n  yPositions: [-7, -5, -3, 0, 2, 5],\n};\n\nconst pos_5 = {\n  xPositions: [-18, -7, 0, 9, 18],\n  yPositions: [-7, -3, 0, 2, 5],\n};\n\nconst pos_4 = {\n  xPositions: [-15, -5, 3, 14],\n  yPositions: [-7, -3, 2, 5],\n};\n\nconst pos_3 = {\n  xPositions: [-15, 0, 14],\n  yPositions: [-7, 0, 5],\n};\n\nconst pos_2 = {\n  xPositions: [-10, 14],\n  yPositions: [-7, 5],\n};\n\nexport const posterPositions = [{}, {}, pos_2, pos_3, pos_4, pos_5, pos_6];\n","import {\n  Color,\n  DoubleSide,\n  Mesh,\n  MeshNormalMaterial,\n  Object3D,\n  PlaneGeometry,\n  ShaderMaterial,\n  Sprite,\n  SpriteMaterial,\n  TextGeometry,\n} from \"three\";\nimport { rated_colors } from \"../constants/colors\";\nimport { rand } from \"../helper/rand\";\nimport { vshader, fshader } from \"../glsl/bg.glsl\";\nimport { box_fshader, box_vshader } from \"../glsl/box.glsl\";\nimport { posterPositions } from \"../constants/positions\";\n\nconst w = 5.5;\nconst h = w * 1.5;\n\n/**\n * Class for the entire movie object\n */\nexport default class Movie {\n  constructor(movieObjs, loaders, genreObjs, font, scene) {\n    this.movieObjs = movieObjs;\n    this.loaders = loaders;\n    this.genreObjs = genreObjs;\n    this.font = font;\n    this.scene = scene;\n  }\n\n  init() {\n    let container = new Object3D();\n    let posters = this.initPosters();\n    container.add(posters);\n\n    return posters;\n  }\n\n  /**\n   * Private init functions\n   */\n\n  initPosters() {\n    this.posterObjs = new Object3D();\n    this.posterObjs.posters = [];\n    this.posterObjs.planes = [];\n\n    // sort movies by box office & release (ascending order)\n    let sortByBoxOffice = [...this.movieObjs].sort(function (a, b) {\n      return a.boxOfficeInt - b.boxOfficeInt;\n    });\n    let sortByTime = [...this.movieObjs].sort(function (a, b) {\n      return parseInt(a.year) - parseInt(b.year);\n    });\n    const curPos = posterPositions[this.movieObjs.length];\n    const xPositions = curPos.xPositions;\n    const yPositions = curPos.yPositions;\n\n    this.movieObjs.forEach((movie, index) => {\n      let yIndex = sortByBoxOffice.findIndex((el) => el.name === movie.name);\n      let xIndex = sortByTime.findIndex((el) => el.name === movie.name);\n\n      let x = xPositions[xIndex];\n      let y = yPositions[yIndex];\n\n      let posterMesh = this.initPoster(movie, x, y);\n      this.posterObjs.add(posterMesh);\n      this.posterObjs.posters.push(posterMesh);\n      posterMesh.position.set(x, y, 0);\n\n      let plane = this.initPlane(movie);\n      plane.position.set(x, y, -1);\n      this.posterObjs.add(plane);\n      this.posterObjs.planes.push(plane);\n\n      let genreObj = this.genreObjs[movie.genre].clone();\n      genreObj.position.set(x - w / 2, y - h / 2, 1);\n      this.posterObjs.add(genreObj);\n    });\n\n    return this.posterObjs;\n  }\n\n  createCoordText(movie) {\n    const geometry = new TextGeometry(\"Hello three.js!\", {\n      font: this.font,\n      size: 80,\n      height: 5,\n      curveSegments: 12,\n      bevelEnabled: true,\n      bevelThickness: 10,\n      bevelSize: 8,\n      bevelOffset: 0,\n      bevelSegments: 5,\n    });\n    const material = new MeshNormalMaterial({ color: new Color(\"red\") });\n    const mesh = new Mesh(geometry, material);\n    return mesh;\n  }\n\n  initPoster(movie) {\n    return this.initShaderPoster(movie);\n  }\n\n  initShaderPoster(movie) {\n    let imgLink = movie.imgLink;\n    let geometry = new PlaneGeometry(w, h);\n    let texture = this.loaders.textureLoader.load(imgLink);\n\n    let material = new ShaderMaterial({\n      vertexShader: vshader,\n      fragmentShader: fshader,\n      uniforms: {\n        u_time: { value: 0.1 },\n        uTexture: { value: texture },\n      },\n      side: DoubleSide,\n    });\n\n    let mesh = new Mesh(geometry, material);\n    return mesh;\n  }\n\n  initSpritePoster(movie) {\n    let obj = new Object3D();\n    let imgLink = movie.imgLink;\n    const map = this.loaders.textureLoader.load(imgLink);\n    const material = new SpriteMaterial({ map: map, color: 0xffffff });\n    const sprite = new Sprite(material);\n    sprite.scale.set(w, h, 1);\n    obj.add(sprite);\n    return obj;\n  }\n\n  /**\n   * Init the background plane\n   */\n  initPlane(movie) {\n    // clip a WebGL geometry with it.\n    let planeColor = rated_colors[movie.rated];\n    if (!planeColor) {\n      planeColor = rated_colors.Default;\n    }\n    let material = new ShaderMaterial({\n      vertexShader: box_vshader,\n      fragmentShader: box_fshader,\n      uniforms: {\n        u_time: { value: 0.1 },\n        u_color_r: { value: planeColor.r },\n        u_color_g: { value: planeColor.g },\n        u_color_b: { value: planeColor.b },\n      },\n    });\n    var geometry = new PlaneGeometry(w * 1.2, h * 1.2);\n    var mesh = new Mesh(geometry, material);\n    mesh.castShadow = true;\n    mesh.receiveShadow = true;\n    mesh.position.set(0, 0, -1);\n    let rotationDir = rand([-1, 1]);\n    mesh.rotation.set(0, 0, 0.1 * rotationDir);\n\n    return mesh;\n  }\n}\n","export const box_vshader = `\nvarying vec2 v_uv;\nvarying float v_wave;\nuniform float u_time;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v) {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n  \n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n  \n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n  \n  // Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n           \n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n  \n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  \n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\nvoid main() {\t\n  v_uv = uv;\n  vec3 pos = position;\n  float noiseFreq = 3.5;\n  float noiseAmp = 0.15; \n  vec3 noisePos = vec3(pos.x * noiseFreq + u_time, pos.y, pos.z);\n  pos.z += snoise(noisePos) * noiseAmp;\n  v_wave = pos.z;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0 );\n}\n`;\n\nexport const box_fshader = `\nvarying vec2 v_uv;\nvarying float v_wave;\nuniform float u_color_r;\nuniform float u_color_g;\nuniform float u_color_b;\n\nvoid main (void)\n{\n  vec3 color = vec3(u_color_r, u_color_g, u_color_b);\n  gl_FragColor = vec4(color, 1.);\n}\n`;\n","import {\n  Scene,\n  Color,\n  PerspectiveCamera,\n  WebGLRenderer,\n  BoxGeometry,\n  Mesh,\n  MeshPhongMaterial,\n  AmbientLight,\n  PointLight,\n  TextureLoader,\n  Clock,\n  MeshNormalMaterial,\n  TextGeometry,\n  Group,\n} from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { CSS3DRenderer } from \"three/examples/jsm/renderers/CSS3DRenderer\";\nimport { FontLoader } from \"three/examples/jsm/loaders/FontLoader\";\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\nimport { FXAAShader } from \"three/examples/jsm/shaders/FXAAShader\";\nimport { LuminosityShader } from \"three/examples/jsm/shaders/LuminosityShader.js\";\nimport Movie from \"./class/Movie\";\nimport gsap from \"gsap/all\";\nimport movie_genres_data from \"../data/movie-genres.json\";\n\nconst models = movie_genres_data.finalGenres;\n\nexport default class WebGLApp {\n  constructor(container, cssContainer, nameSpan, callback) {\n    this.htmlElem = container;\n    this.cssElem = cssContainer;\n    this.nameSpan = nameSpan;\n    this.rafId = 0;\n    this.isRendering = false;\n    this.onloadCallback = callback;\n    /**\n     * Dynamically changed elements\n     */\n    this.posters = [];\n    this.movieGenreObjs = {};\n    this.hasSetup = false;\n  }\n\n  setup = (movieObjs) => {\n    const darkBlue = 0x000514;\n    const lightOrange = 0xffc48a;\n    const violet = 0xb18cff;\n    this.movieObjs = movieObjs;\n    console.log(\"set up\", this.movieObjs);\n    this.scene = new Scene();\n    this.scene.background = new Color(violet);\n    this.camera = new PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    this.camera.position.set(0, 0, 20);\n    this.camera.lookAt(this.scene.position);\n    // this.camera = new PerspectiveCamera(\n    //   75,\n    //   window.innerWidth / window.innerHeight,\n    //   0.1,\n    //   1000\n    // );\n    // this.camera.position.z = 5;\n    this.tanFOV = Math.tan(((Math.PI / 180) * this.camera.fov) / 2);\n    this.renderer = new WebGLRenderer({ antialias: true });\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.renderer.setClearColor(0xffffff);\n    this.renderer.shadowMap.enabled = true;\n    this.cssRenderer = new CSS3DRenderer();\n    this.cssRenderer.setSize(window.innerWidth, window.innerHeight);\n    this.cssRenderer.domElement.style.position = \"absolute\";\n    this.cssRenderer.domElement.style.top = 0;\n    this.cssElem.appendChild(this.cssRenderer.domElement);\n    this.htmlElem.appendChild(this.renderer.domElement);\n    this.loader = new GLTFLoader();\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n    this.controls.update();\n    this.textureLoader = new TextureLoader();\n    this.clock = new Clock();\n    this.createCube();\n    this.createLights();\n    this.loadMovieGenreObjs();\n    this.initPostprocessing();\n    //this.test();\n    console.log(\"Finished set up\");\n  };\n\n  updateState = (objs, animateDir) => {\n    this.movieObjs = objs;\n    this.clearState(animateDir);\n  };\n\n  /***\n   * PRIVATE\n   */\n\n  createNewState = (animateDir) => {\n    let loaders = {\n      textureLoader: this.textureLoader,\n    };\n    let movieObj = new Movie(\n      this.movieObjs,\n      loaders,\n      this.movieGenreObjs,\n      this.font,\n      this.scene\n    );\n    let obj = movieObj.init();\n    this.movieObj = obj;\n    let animateY = animateDir === \"up\" ? -25 : 25;\n    this.movieObj.position.y = animateY;\n    this.scene.add(obj);\n    gsap.to(this.movieObj.position, {\n      y: 0,\n      ease: animateDir === \"up\" ? \"Power4.easeOut\" : \"Bounce.easeOut\",\n      duration: 0.8,\n    });\n    console.log(\"Finished creating new state\");\n  };\n\n  clearState = (animateDir) => {\n    console.log(\"Clearing state\");\n    if (this.movieObj) {\n      let that = this;\n      const callBack = () => {\n        console.log(\"Complete clear state animation\");\n        that.scene.remove(that.movieObj);\n        that.createNewState(animateDir);\n      };\n\n      let tl = gsap.timeline({\n        onComplete: callBack,\n      });\n      this.movieObj.children.forEach((el, index) => {\n        let goal = animateDir === \"up\" ? 50 : -50;\n        let target = goal - el.position.y;\n        tl.to(\n          el.position,\n          {\n            y: target,\n            duration: 0.5,\n            ease: \"Power4.easeInOut\",\n          },\n          index * 0.05\n        );\n      });\n    } else {\n      this.createNewState(animateDir);\n    }\n  };\n\n  createText = (font) => {\n    console.log(\"In createText\");\n    const textGeometry = new TextGeometry(\"Hello world!\", {\n      font,\n      size: 0.8,\n      height: 0.3,\n      curveSegments: 4,\n      bevelEnabled: true,\n      bevelThickness: 0.05,\n      bevelSize: 0.05,\n      bevelOffset: -0.05,\n      bevelSegments: 5,\n    });\n    const material = new MeshNormalMaterial();\n    const text = new Mesh(textGeometry, material);\n    textGeometry.computeBoundingBox();\n    textGeometry.center();\n    this.textGroup.add(text);\n  };\n\n  /**\n   * Debug\n   */\n  test = () => {\n    this.textGroup = new Group();\n    this.scene.add(this.textGroup);\n    this.fontLoader.load(\n      \"https://assets.codepen.io/85648/Luckiest+Guy_Regular.json\",\n      this.createText\n    );\n  };\n\n  /**\n   * Init scene\n   */\n  loadFont = () => {\n    this.fontLoader = new FontLoader();\n    this.font = this.fontLoader.load(\n      \"assets/fonts/PPGoshaSans.json\",\n      // onLoad callback\n      function (font) {\n        // do something with the font\n        //console.log(font);\n      },\n\n      // onProgress callback\n      function (xhr) {\n        //console.log((xhr.loaded / xhr.total) * 100 + \"% loaded\");\n      },\n\n      // onError callback\n      function (err) {\n        //console.log(\"An error happened\");\n      }\n    );\n  };\n\n  loadMovieGenreObjs = () => {\n    models.forEach((mod) => this.loadModel(mod));\n  };\n\n  initPostprocessing = () => {\n    this.composer = new EffectComposer(this.renderer);\n    const renderPass = new RenderPass(this.scene, this.camera);\n    this.composer.addPass(renderPass);\n    const luminosityPass = new ShaderPass(LuminosityShader);\n    this.composer.addPass(luminosityPass);\n    const effectFXAA = new ShaderPass(FXAAShader);\n    effectFXAA.uniforms[\"resolution\"].value.set(\n      1 / window.innerWidth,\n      1 / window.innerHeight\n    );\n    effectFXAA.renderToScreen = true;\n    this.composer.addPass(effectFXAA);\n  };\n\n  loadModel = (fileName) => {\n    const scl = 15;\n    let that = this;\n    this.loader.load(\n      \"assets/\" + fileName + \".gltf\",\n      function (loaded) {\n        let model = loaded.scenes[0];\n        model.scale.set(scl, scl, scl);\n        that.movieGenreObjs[fileName] = model;\n        if (Object.keys(that.movieGenreObjs).length === models.length) {\n          // init state as we finished loading models\n          that.updateState(that.movieObjs, \"up\");\n          that.hasSetup = true;\n          that.onloadCallback(false);\n        }\n      },\n      (load) => {},\n      (error) => {\n        console.log(\"error with loading file: \", fileName, error);\n      }\n    );\n  };\n\n  createCube = () => {\n    const boxSize = 50;\n    let geometry = new BoxGeometry(boxSize, boxSize, boxSize);\n    let material = new MeshPhongMaterial({\n      color: new Color(0x7c71fe),\n      wireframe: true,\n    });\n    this.cube = new Mesh(geometry, material);\n    this.scene.add(this.cube);\n  };\n\n  createLights = () => {\n    this.ambientLight = new AmbientLight(0xffffff);\n    this.scene.add(this.ambientLight);\n    this.pointLight = new PointLight(0xffffff);\n    this.scene.add(this.pointLight);\n  };\n\n  renderScene = () => {\n    // this.composer.render();\n    this.renderer.render(this.scene, this.camera);\n    this.cssRenderer.render(this.scene, this.camera);\n  };\n\n  handleResize = () => {\n    this.renderer.width = this.htmlElem.clientWidth;\n    this.renderer.height = this.htmlElem.clientHeight;\n    this.renderer.setSize(this.renderer.width, this.renderer.height);\n    this.camera.aspect = this.renderer.width / this.renderer.height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  update = () => {\n    this.cube.rotation.x += 0.01;\n    this.cube.rotation.y += 0.0125;\n    this.cube.rotation.z += 0.012;\n    this.controls.update();\n\n    if (this.movieObj) {\n      this.movieObj.posters.forEach((poster, index) => {\n        if (poster.material.uniforms) {\n          poster.material.uniforms.u_time.value = this.clock.getElapsedTime();\n        }\n        if (this.movieObj.planes[index].material.uniforms) {\n          this.movieObj.planes[index].material.uniforms.u_time.value =\n            this.clock.getElapsedTime();\n        }\n      });\n      //this.movieObj.planes.forEach((plane) => wiggleMesh(plane));\n    }\n\n    //this.controls.update();\n    this.rafId = requestAnimationFrame(this.update);\n    this.renderScene();\n  };\n\n  render = (render) => {\n    if (this.isRendering === render) return;\n    this.isRendering = render;\n    if (render) {\n      this.update();\n    } else {\n      cancelAnimationFrame(this.rafId);\n    }\n  };\n}\n","export const baseUrl = \"/CDT-project-02\";\n","import { Nav } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { baseUrl } from \"../utility/file\";\n\nexport default function NavigationBar(props) {\n  return (\n    <Nav\n      className=\"justify-content-end\"\n      style={{ borderBottom: \"1px solid rgb(130, 75, 219)\" }}\n      activeKey={props.activeKey}\n      // onSelect={handleSelect}\n    >\n      <Nav.Item>\n        <Link\n          style={{ color: props.color }}\n          className={props.activeKey === 1 ? \"active\" : \"\"}\n          to={baseUrl + \"/\"}\n        >\n          Gallery\n        </Link>\n      </Nav.Item>\n      <Nav.Item>\n        <Link\n          style={{ color: props.activeKey === 2 ? \"white\" : props.color }}\n          to={baseUrl + \"/catalog\"}\n          className={props.activeKey === 2 ? \"active\" : \"\"}\n        >\n          Catalog\n        </Link>\n      </Nav.Item>\n      <Nav.Item>\n        <Link\n          to={baseUrl + \"/info\"}\n          className={props.activeKey === 3 ? \"active\" : \"\"}\n          style={{ color: props.activeKey === 3 ? \"white\" : props.color }}\n        >\n          Info\n        </Link>\n      </Nav.Item>\n      <Nav.Item>\n        <Link\n          to={baseUrl + \"/analysis\"}\n          className={props.activeKey === 4 ? \"active\" : \"\"}\n          style={{ color: props.activeKey === 4 ? \"white\" : props.color }}\n        >\n          Analysis\n        </Link>\n      </Nav.Item>\n    </Nav>\n  );\n}\n","export const snippetPositions = [\n  { marginLeft: \"-60vw\", marginTop: \"-40vh\" },\n  { marginLeft: \"-50vw\", marginTop: \"30vh\" },\n  { marginLeft: \"50vw\", marginTop: \"-65vh\" },\n  { marginLeft: \"10vw\", marginTop: \"-40vh\" },\n  { marginLeft: \"65vw\", marginTop: \"55vh\" },\n];\n","import { useEffect, useRef, useState } from \"react\";\nimport WebGLApp from \"../webgl/webgl-app\";\nimport \"../styles/main.css\";\nimport complete_data from \"../data/final-data.json\";\nimport anime from \"animejs\";\n\n// redux\nimport NavigationBar from \"../components/Navbar\";\nimport { snippetPositions } from \"../utility/snippetPositions\";\n\nexport default function Main(props) {\n  // debug\n  const DISPLAY_LOADING = false;\n\n  // loading\n  const [isLoading, setLoad] = useState(true);\n  const loadScreenRef = useRef(null);\n  const [hasSetupSnippets, setSnippets] = useState(false);\n\n  useEffect(() => {\n    var textWrapper = document.querySelector(\".load-text .letters\");\n    textWrapper.innerHTML = textWrapper.textContent.replace(\n      /\\S/g,\n      \"<span class='letter'>$&</span>\"\n    );\n\n    anime.timeline({ loop: true }).add({\n      targets: \".load-text .letter\",\n      translateY: [\"1.1em\", 0],\n      translateZ: 0,\n      duration: 750,\n      delay: (el, i) => 80 * i,\n    });\n  }, []);\n\n  // navigating directors\n  const max_index = complete_data.length - 1;\n  var directorIdx = 0; // actual reference to number\n  if (\n    props.location.directorIdx !== null &&\n    props.location.directorIdx !== undefined\n  ) {\n    directorIdx = props.location.directorIdx;\n    localStorage.setItem(\"directorIdx\", JSON.stringify(directorIdx));\n  } else if (localStorage.getItem(\"directorIdx\")) {\n    directorIdx = JSON.parse(localStorage.getItem(\"directorIdx\"));\n  } else {\n    localStorage.setItem(\"directorIdx\", JSON.stringify(directorIdx));\n  }\n\n  const [currentIdx, setIdx] = useState(directorIdx); // used to trigger re-render\n\n  // webgl\n  const containerRef = useRef(null);\n  const cssContainerRef = useRef(null);\n  const webglApp = useRef(null);\n  const directorNameRef = useRef(null);\n\n  // redux\n  let cart = useRef([]);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"cart\")) {\n      cart.current = JSON.parse(localStorage.getItem(\"cart\"));\n    } else {\n      localStorage.setItem(\"cart\", JSON.stringify([]));\n    }\n  }, []);\n\n  function updateCart() {\n    // get current director idx from db\n    let idx = 0;\n    if (localStorage.getItem(\"directorIdx\")) {\n      idx = JSON.parse(localStorage.getItem(\"directorIdx\"));\n    } else {\n      localStorage.setItem(\"directorIdx\", 0); // shouldn't happen\n    }\n    console.log(\"Update cart with director index\", idx);\n\n    // create new cart\n    let orig = JSON.parse(localStorage.getItem(\"cart\"));\n    let newDirector = complete_data[idx];\n\n    // no dups\n    if (orig.find((el) => el.name === newDirector.name)) {\n      alert(\"Already selected! Find someone else. ;-)\");\n      return;\n    }\n\n    let newCart = [...orig];\n    newCart.push(newDirector);\n    const MAX_DIRECTORS = 4;\n\n    // cap number\n    if (newCart.length > MAX_DIRECTORS) {\n      alert(\"You can only select a maximum of 4 directors to compare. :-)\");\n      return;\n    }\n\n    // update db\n    localStorage.setItem(\"cart\", JSON.stringify(newCart));\n  }\n\n  function handleAddDirector() {\n    updateCart();\n  }\n\n  function getWebglParams(new_index) {\n    let movieObjs = complete_data[new_index].movies.map((movie) => {\n      let first_genre = movie.Genre.substr(0, movie.Genre.indexOf(\",\"));\n      return {\n        imgLink: movie.Poster,\n        genre: first_genre === \"\" ? movie.Genre : first_genre,\n        rated: movie.Rated,\n        year: movie.Year,\n        boxOffice: movie.BoxOffice,\n        boxOfficeInt: movie.BoxOfficeInt,\n        name: movie.Title,\n      };\n    });\n    return movieObjs;\n  }\n\n  function handleUpdateState(new_index, direction) {\n    localStorage.setItem(\"directorIdx\", new_index);\n    webglApp.current.updateState(getWebglParams(new_index), direction);\n  }\n\n  function updateDirector(e) {\n    let new_index;\n    let svg_animate;\n    let translate_target;\n    let direction;\n    if (e.key === \"ArrowDown\") {\n      direction = \"down\";\n      new_index = Math.min(directorIdx + 1, max_index);\n      svg_animate = document.getElementById(\"arrow_down\");\n      translate_target = \"1.5em\";\n    } else if (e.key === \"ArrowUp\") {\n      direction = \"up\";\n      new_index = Math.max(directorIdx - 1, 0);\n      svg_animate = document.getElementById(\"arrow_up\");\n      translate_target = \"-1.5em\";\n    } else {\n      return;\n    }\n    if (new_index === directorIdx) {\n      alert(\"You've reached the end, go the other way. :-)\");\n      return;\n    }\n    anime.timeline().add({\n      targets: svg_animate,\n      translateY: [translate_target, 0],\n      fill: [\"rgb(184, 98, 255)\", \"rgb(255, 255, 255)\"],\n      duration: 1500,\n    });\n    directorIdx = new_index;\n    setIdx(new_index);\n    handleUpdateState(new_index, direction);\n  }\n\n  useEffect(() => {\n    if (DISPLAY_LOADING) return;\n    if (containerRef.current === null) return;\n    if (webglApp.current !== null) return;\n\n    function onWindowResize() {\n      webglApp.current.handleResize();\n    }\n\n    webglApp.current = new WebGLApp(\n      containerRef.current,\n      cssContainerRef.current,\n      directorNameRef.current,\n      setLoad\n    );\n    webglApp.current.setup(getWebglParams(currentIdx));\n    webglApp.current.render(true);\n    window.addEventListener(\"resize\", onWindowResize, false);\n    window.addEventListener(\"keydown\", updateDirector, false);\n\n    return () => {\n      webglApp.current.render(false);\n      window.removeEventListener(\"resize\", onWindowResize, false);\n      window.removeEventListener(\"keydown\", updateDirector, false);\n    };\n  }, []);\n\n  // toggle NYT articles\n  const [showNYT, setShowNYT] = useState(false);\n\n  function handleToggleNYT() {\n    let orig = showNYT;\n    let display = !orig;\n    anime\n      .timeline({\n        complete: function () {\n          setShowNYT(display);\n        },\n      })\n      .add({\n        targets: \".article__snippet\",\n        translateY: [\"1.1em\", 0],\n        translateZ: 0,\n        opacity: display ? \"100%\" : 0,\n        duration: 200,\n        delay: (el, i) => 50 * i,\n      });\n  }\n\n  useEffect(() => {\n    let snippets = [...document.getElementsByClassName(\"article__snippet\")];\n    if (snippets.length === 0) return;\n    if (hasSetupSnippets) return;\n    let opacity = showNYT ? \"100%\" : 0;\n    snippets.forEach((snippet) => (snippet.style.opacity = opacity));\n    setSnippets(true);\n  });\n\n  return (\n    <div id=\"main__wrapper\">\n      <div id=\"webgl\" ref={containerRef}></div>\n      <div id=\"css\" ref={cssContainerRef}></div>\n      <div className=\"root\" id=\"vis__text\" ref={directorNameRef}>\n        {!isLoading && <NavigationBar activeKey={1} color=\"white\" />}\n\n        <div\n          className=\"center__container\"\n          id=\"loading__screen\"\n          ref={loadScreenRef}\n          style={{\n            backgroundColor: \"rgb(127, 61, 233)\",\n            opacity: isLoading || DISPLAY_LOADING ? \"100%\" : \"0\",\n            height: isLoading || DISPLAY_LOADING ? \"100vh\" : \"0\",\n          }}\n        >\n          <h1 className=\"load-text\">\n            <span className=\"text-wrapper\">\n              <span className=\"letters\">Loading Bech(ideal) ...</span>\n            </span>\n          </h1>\n        </div>\n\n        {!isLoading && (\n          <div className=\"min-vh-90\" id=\"director__vis__content\">\n            <div className=\"vline\" id=\"y__axis\">\n              <span>Box Office</span>\n            </div>\n            <hr id=\"x__axis\" />\n            <span id=\"x__axis__label\"> Time </span>\n            <div className=\"center__container min-vh-90\">\n              <h1 id=\"director_name\">{complete_data[currentIdx].name}</h1>\n\n              {complete_data[currentIdx].NYT_articles.map((article, index) => (\n                <div\n                  className=\"article__snippet\"\n                  style={snippetPositions[index]}\n                  key={index}\n                >\n                  <p>{article.snippet}</p>\n                  <a\n                    className=\"btn\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    href={article.web_url}\n                  >\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"16\"\n                      height=\"16\"\n                      fill=\"rgb(147, 117, 255)\"\n                      className=\"bi bi-link-45deg\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path d=\"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z\" />\n                      <path d=\"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z\" />\n                    </svg>{\" \"}\n                    Read More\n                  </a>\n                </div>\n              ))}\n            </div>\n\n            <div id=\"footer\">\n              <div>\n                <div style={{ marginBottom: \"1vh\", fontSize: \"1vw\" }}>\n                  <span>\n                    {\" \"}\n                    Press{\" \"}\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      style={{ width: \"25px\", height: \"25px\" }}\n                      fill=\"white\"\n                      className=\"bi bi-arrow-up-square-fill\"\n                      id=\"arrow_up\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path d=\"M2 16a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2zm6.5-4.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 1 0z\" />\n                    </svg>{\" \"}\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      style={{ width: \"25px\", height: \"25px\" }}\n                      fill=\"white\"\n                      className=\"bi bi-arrow-down-square-fill\"\n                      id=\"arrow_down\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path d=\"M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5a.5.5 0 0 1 1 0z\" />\n                    </svg>{\" \"}\n                    to navigate\n                  </span>\n                </div>\n                <button className=\"btn btn-light\" onClick={handleAddDirector}>\n                  Add director{\" \"}\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    fill=\"white\"\n                    className=\"bi bi-bookmark-plus\"\n                    viewBox=\"0 0 16 16\"\n                  >\n                    <path d=\"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z\" />\n                    <path d=\"M8 4a.5.5 0 0 1 .5.5V6H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V7H6a.5.5 0 0 1 0-1h1.5V4.5A.5.5 0 0 1 8 4z\" />\n                  </svg>{\" \"}\n                </button>\n              </div>\n              <div>\n                <button\n                  className=\"btn btn-light\"\n                  style={{\n                    backgroundColor: showNYT ? \"white\" : \"rgb(165, 119, 240)\",\n                    color: !showNYT ? \"white\" : \"rgb(165, 119, 240)\",\n                  }}\n                  onClick={handleToggleNYT}\n                >\n                  Toggle Articles{\" \"}\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    fill={showNYT ? \"rgb(165, 119, 240)\" : \"white\"}\n                    className=\"bi bi-eye\"\n                    viewBox=\"0 0 16 16\"\n                  >\n                    <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\" />\n                    <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\" />\n                  </svg>{\" \"}\n                </button>{\" \"}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport movie_data from \"../data/not-using/response(all).json\";\nimport bechdel_data from \"../data/not-using/bechdel-test-2010-onwards.json\";\nimport directors_data from \"../data/directors-w-NYT.json\";\n// merge\nimport final_directors from \"../data/main-data.json\";\nimport NYT_data from \"../data/NYT-articles.json\";\n// get box office\nimport dir_w_NYT from \"../data/directors-w-NYT.json\";\n// add index\nimport final_data from \"../data/final-data.json\";\n\nexport default function ParseData() {\n  const btnRef = useRef();\n  const [downloadHref, setDownloadHref] = useState();\n  const [outputJson, setOutputJson] = useState([]);\n\n  const compileOutput = () => {\n    //https://stackoverflow.com/questions/65903776/how-to-read-and-write-to-local-json-files-from-react-js\n    const TextFile = () => {\n      const textFile = new Blob([[JSON.stringify(outputJson)]], {\n        type: \"application/json\",\n      });\n      setDownloadHref(URL.createObjectURL(textFile));\n      btnRef.current.download = \"data.json\";\n    };\n\n    TextFile();\n  };\n\n  const parseData = () => {\n    let directors = {}; // each entry contains {name: ..., movies: [], ratings: 0};\n    let actors = {}; // each entry contains {name: ..., movies: []};\n    let movies = movie_data;\n    for (var i = 0; i < movies.length; i++) {\n      let movie = movie_data[i];\n      if (!movie.imdbID) {\n        continue;\n      }\n      let queryId = movie[\"imdbID\"].slice(2);\n      let bechdel = bechdel_data.find((b) => b.imdbid === queryId);\n      if (!bechdel) {\n        console.log(\"Couldn't find bechdel\", queryId);\n        continue;\n      }\n      if (bechdel.rating !== 3) {\n        continue;\n      }\n      let director = movie.Director;\n      if (director === \"N/A\") {\n        continue;\n      }\n      if (!directors[director]) {\n        directors[director] = {\n          movieCnt: 0,\n          movies: [],\n          ratingSum: 0,\n          avgRating: 0,\n          name: director,\n        };\n      }\n      directors[director].movieCnt += 1;\n      directors[director].movies.push(movie);\n      directors[director].ratingSum += bechdel.rating; // divide by numMovies for avg rating\n    }\n\n    let directorArr = [];\n\n    for (const director in directors) {\n      let directorObj = directors[director];\n      directorObj.avgRating = directorObj.ratingSum / directorObj.movies.length;\n      if (directorObj.movies.length > 2) {\n        directorArr.push(directorObj);\n      }\n    }\n\n    directorArr.sort((dir1, dir2) => {\n      let ret = dir1.movieCnt > dir2.movieCnt ? -1 : 1;\n      return ret; // all movies with rating of 3\n    });\n\n    // setOutputJson(directorArr);\n\n    let missingBoxOffice = [];\n    directors_data.forEach((director) => {\n      director.movies.forEach((movie) => {\n        if (movie.BoxOffice === \"N/A\") {\n          missingBoxOffice.push(movie.Title);\n        }\n      });\n    });\n\n    setOutputJson(missingBoxOffice);\n  };\n\n  function mergeData() {\n    console.log(NYT_data.length, final_directors.length);\n    let finalData = [];\n\n    for (let i = 0; i < final_directors.length; i++) {\n      let dirObj = final_directors[i];\n      let NYT_articles = NYT_data.find((el) => el.name === dirObj.name);\n      if (!NYT_articles) {\n        console.log(\"could not find article for \", dirObj.name);\n        continue;\n      }\n      let new_obj = dirObj;\n      new_obj.NYT_articles = NYT_articles.stories;\n      finalData.push(new_obj);\n    }\n\n    console.log(finalData);\n    setOutputJson(finalData);\n  }\n\n  function analyzeBoxOffice() {\n    let new_data = [];\n    dir_w_NYT.forEach((dir) => {\n      let avg = 0;\n      let movieCnt = 0;\n      let new_obj = dir;\n      new_obj.movies.forEach((mov, index) => {\n        let str = mov.BoxOffice; // sample:  \"BoxOffice\": \"$74,262,031\"\n        let removeComma = str.replace(/,/g, \"\");\n        let finalStr = removeComma.substring(1);\n        let num = parseInt(finalStr);\n        new_obj.movies[index].BoxOfficeInt = num;\n        avg += num;\n        movieCnt++;\n      });\n      avg /= movieCnt;\n      new_obj.boxOfficeAvg = Math.floor(avg);\n      let sortedByYear = [...new_obj.movies].sort(function (e1, e2) {\n        return parseInt(e1.Year) - parseInt(e2.Year);\n      });\n      let sortedByBoxOffice = [...new_obj.movies].sort(function (e1, e2) {\n        return parseInt(e1.BoxOfficeInt) - parseInt(e2.BoxOfficeInt);\n      });\n      new_obj.sortedMovies = {};\n      new_obj.sortedMovies[\"sortedByYear\"] = sortedByYear;\n      new_obj.sortedMovies[\"sortedByBoxOffice\"] = sortedByBoxOffice;\n      new_data.push(new_obj);\n    });\n    console.log(new_data);\n    setOutputJson(new_data);\n  }\n\n  function addIndex() {\n    let new_data = [];\n    final_data.forEach((dir, index) => {\n      let newObj = dir;\n      newObj.unsortedIndex = index;\n      new_data.push(newObj);\n    });\n    setOutputJson(new_data);\n  }\n\n  function getMovieGenres() {\n    let genres = {};\n    final_data.forEach((dir) => {\n      dir.movies.forEach((movie) => {\n        let first_genre = movie.Genre.substr(0, movie.Genre.indexOf(\",\"));\n        if (first_genre === \"\") {\n          first_genre = movie.Genre;\n        }\n        if (!genres[first_genre]) {\n          genres[first_genre] = { count: 1 };\n        } else {\n          genres[first_genre].count++;\n        }\n      });\n    });\n    console.log(genres);\n    let finalGenres = Object.keys(genres);\n    genres.finalGenres = finalGenres;\n    setOutputJson(genres);\n  }\n\n  return (\n    <div>\n      <a ref={btnRef} href={downloadHref} onClick={compileOutput}>\n        Download file\n      </a>\n      <button onClick={parseData}> Parse Data</button>\n      <button onClick={mergeData}> Merge Data</button>\n      <button onClick={analyzeBoxOffice}> Count Box Office</button>\n      <button onClick={addIndex}> Add Index </button>\n      <button onClick={getMovieGenres}> Get Movie Genres </button>\n    </div>\n  );\n}\n","export default function EmptyAnalysis() {\n  return (\n    <div>\n      <p className=\"page__description\">\n        You have not chosen any directors yet. Select up to 4 directors that you\n        are interested in learning more about which of their movies passed the\n        bechdel test.\n      </p>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport {\n  Card,\n  Carousel,\n  Col,\n  Container,\n  Row,\n  Button,\n  Accordion,\n} from \"react-bootstrap\";\nimport EmptyAnalysis from \"../components/EmptyAnalysis\";\nimport NavigationBar from \"../components/Navbar\";\nimport \"../styles/analysis.css\";\nimport complete_data from \"../data/final-data.json\";\nimport { rand } from \"../webgl/helper/rand\";\nimport { Link } from \"react-router-dom\";\nimport { baseUrl } from \"../utility/file\";\n\nexport default function Analysis() {\n  let initialCart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!initialCart) {\n    initialCart = [];\n    localStorage.setItem(\"cart\", JSON.stringify([])); // shouldn't happen\n  }\n  const [cartData, setCart] = useState(initialCart);\n\n  function handleRemove(directorName) {\n    console.log(\"removing director\", directorName);\n    let newCart = cartData.filter(function (el) {\n      return el.name !== directorName;\n    });\n    localStorage.setItem(\"cart\", JSON.stringify(newCart));\n    setCart(newCart);\n  }\n\n  function getRecommendations() {\n    let recommendations = [];\n    for (let i = 0; i < 3; i++) {\n      recommendations.push(rand(complete_data));\n    }\n    return recommendations;\n  }\n\n  let initialRecs = getRecommendations();\n  const [recs, setRecs] = useState(initialRecs);\n\n  function handleChangeRec() {\n    let new_recs = getRecommendations();\n    setRecs(new_recs);\n  }\n\n  const size = \"25px\";\n  const detailsSvgParams = {\n    width: size,\n    height: size,\n    marginRight: \".5vw\",\n  };\n  const buttonStyle = {};\n\n  return (\n    <div id=\"analysis__root\">\n      <NavigationBar activeKey={4} color=\"rgb(130, 75, 219)\" />\n\n      <div id=\"analysis__content\" className=\"content__wrapper page__root\">\n        <h1 className=\"title\">Your top directors</h1>\n\n        {cartData.length === 0 && <EmptyAnalysis />}\n\n        {cartData.length !== 0 && (\n          <div>\n            <Container id=\"directors__wrapper\" fluid>\n              <Row>\n                {cartData.map((item, index) => (\n                  <Col sm={3} key={item.name + index}>\n                    <Card style={{ borderColor: \"rgb(130, 75, 219)\" }}>\n                      <Card.Body>\n                        <Card.Title className=\"directorName\">\n                          {item.name}\n                        </Card.Title>\n                        <Card.Text> {item.movieCnt} passing movies</Card.Text>\n                        <Card.Text>\n                          Average box office: $\n                          {new Intl.NumberFormat().format(item.boxOfficeAvg)}\n                        </Card.Text>\n                        <Carousel interval={5000000} indicators={false}>\n                          {item.movies.map((movieObj) => (\n                            <Carousel.Item key={movieObj.Title}>\n                              <img\n                                className=\"d-block w-100\"\n                                src={movieObj.Poster}\n                                alt=\"First slide\"\n                                style={{ marginBottom: \"1vh\" }}\n                              />\n                              <Accordion>\n                                <Accordion.Item eventKey=\"0\">\n                                  <Accordion.Header className=\"movieTitle\">\n                                    <span style={{ fontSize: \"1vw\" }}>\n                                      {movieObj.Title}\n                                    </span>\n                                  </Accordion.Header>\n                                  <Accordion.Body>\n                                    <p className=\"movieBoxoffice roundedBg\">\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        style={detailsSvgParams}\n                                        fill=\"currentColor\"\n                                        className=\"bi bi-bank2\"\n                                        viewBox=\"0 0 16 16\"\n                                      >\n                                        <path d=\"M8.277.084a.5.5 0 0 0-.554 0l-7.5 5A.5.5 0 0 0 .5 6h1.875v7H1.5a.5.5 0 0 0 0 1h13a.5.5 0 1 0 0-1h-.875V6H15.5a.5.5 0 0 0 .277-.916l-7.5-5zM12.375 6v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zM8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM.5 15a.5.5 0 0 0 0 1h15a.5.5 0 1 0 0-1H.5z\" />\n                                      </svg>{\" \"}\n                                      {movieObj.BoxOffice}\n                                    </p>\n                                    <p className=\"movieAwards roundedBg\">\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        style={detailsSvgParams}\n                                        fill=\"currentColor\"\n                                        className=\"bi bi-trophy-fill\"\n                                        viewBox=\"0 0 16 16\"\n                                      >\n                                        <path d=\"M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5zm.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935z\" />\n                                      </svg>{\" \"}\n                                      {movieObj.Awards}\n                                    </p>\n                                    <p className=\"roundedBg\">\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        style={detailsSvgParams}\n                                        fill=\"currentColor\"\n                                        className=\"bi bi-clock-fill\"\n                                        viewBox=\"0 0 16 16\"\n                                      >\n                                        <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z\" />\n                                      </svg>{\" \"}\n                                      {movieObj.Released}\n                                    </p>\n                                    <p className=\"movieGenre\">\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        style={detailsSvgParams}\n                                        fill=\"currentColor\"\n                                        className=\"bi bi-hash\"\n                                        viewBox=\"0 0 16 16\"\n                                      >\n                                        <path d=\"M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z\" />\n                                      </svg>\n                                      {movieObj.Genre}\n                                    </p>\n                                  </Accordion.Body>\n                                </Accordion.Item>\n                              </Accordion>\n                            </Carousel.Item>\n                          ))}\n                        </Carousel>\n                      </Card.Body>\n                      <Card.Footer\n                        style={{ backgroundColor: \" rgb(231, 206, 255)\" }}\n                      >\n                        <Button\n                          style={buttonStyle}\n                          onClick={() => handleRemove(item.name)}\n                        >\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            style={detailsSvgParams}\n                            fill=\"currentColor\"\n                            className=\"bi bi-x-lg\"\n                            viewBox=\"0 0 16 16\"\n                          >\n                            <path\n                              fill-rule=\"evenodd\"\n                              d=\"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z\"\n                            />\n                            <path\n                              fill-rule=\"evenodd\"\n                              d=\"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z\"\n                            />\n                          </svg>\n                        </Button>\n                      </Card.Footer>\n                    </Card>\n                  </Col>\n                ))}\n              </Row>\n            </Container>\n            <Container\n              className=\"justify-content-md-center min-vw-100\"\n              id=\"recommendation__wrapper\"\n              style={{ textAlign: \"center\" }}\n            >\n              <button style={buttonStyle} onClick={handleChangeRec}>\n                Shuffle Suggestions{\" \"}\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"16\"\n                  height=\"16\"\n                  fill=\"currentColor\"\n                  className=\"bi bi-arrow-left-right\"\n                  viewBox=\"0 0 16 16\"\n                >\n                  <path\n                    fill-rule=\"evenodd\"\n                    d=\"M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z\"\n                  />\n                </svg>\n              </button>\n              <h1 className=\"sub__title\">You May Also Like:</h1>\n              <Row>\n                {recs.map((rec) => {\n                  console.log(rec);\n                  let newTo = {\n                    pathname: baseUrl + \"/\",\n                    directorIdx: rec.unsortedIndex,\n                  };\n\n                  return (\n                    <Col key={rec.name}>\n                      <Link to={newTo}>\n                        <span className=\"rec__name\">\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            style={detailsSvgParams}\n                            fill=\"currentColor\"\n                            className=\"bi bi-camera-reels-fill\"\n                            viewBox=\"0 0 16 16\"\n                          >\n                            <path d=\"M6 3a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\" />\n                            <path d=\"M9 6a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\" />\n                            <path d=\"M9 6h.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 7.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 16H2a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h7z\" />\n                          </svg>{\" \"}\n                          {rec.name}\n                        </span>\n                      </Link>\n                    </Col>\n                  );\n                })}\n              </Row>\n            </Container>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import NavigationBar from \"../components/Navbar\";\nimport \"../styles/info.css\";\n\nexport default function Info() {\n  return (\n    <div>\n      <NavigationBar color=\"rgb(130, 75, 219)\" activeKey={3} />\n      <div className=\"content__wrapper\">\n        <h1 className=\"title\">Info</h1>\n        <div className=\"page__root\"> </div>\n      </div>\n    </div>\n  );\n}\n","import Button from \"@restart/ui/esm/Button\";\nimport anime from \"animejs\";\nimport { useState } from \"react\";\nimport { Col, Row, Container } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport NavigationBar from \"../components/Navbar\";\nimport complete_data from \"../data/final-data.json\";\nimport \"../styles/catalog.css\";\nimport { baseUrl } from \"../utility/file\";\n\nexport default function Catalog() {\n  const boxOfficeBucket = 20;\n  const [sortByBO, setSort] = useState(false);\n  const [displayData, setData] = useState(complete_data);\n  let sortedData = [...complete_data].sort(function (a, b) {\n    return b.boxOfficeAvg - a.boxOfficeAvg;\n  }); // descending order\n  let lastMovieCnt = 0;\n\n  const handleSort = () => {\n    const sort = !sortByBO;\n    const new_data = sort ? sortedData : complete_data;\n    function callBack() {\n      setSort(sort);\n      setData(new_data);\n    }\n\n    anime\n      .timeline({\n        complete: callBack,\n      })\n      .add({\n        targets: \"#directors__wrapper\",\n        translateY: [\"1.5em\", 0],\n        duration: 500,\n      });\n  };\n\n  return (\n    <div>\n      <NavigationBar activeKey={2} color=\"rgb(130, 75, 219)\" />\n\n      <div id=\"catalog__content\" className=\"content__wrapper page__root\">\n        <h1 className=\"title\">Catalog</h1>\n        <p className=\"page__description\">\n          This is a comprehensive catalog of {complete_data.length} directors\n          displayed on this website.\n          <br /> You can sort the list of directors by their movies' average box\n          office.\n          <br /> Clicking on a director's name brings you to the data\n          visualization of that particular director.\n        </p>\n\n        <Container fluid>\n          <Row className=\"justify-content-md-center\">\n            <Col>\n              <Button\n                type=\"checkbox\"\n                onClick={handleSort}\n                style={{\n                  backgroundColor: sortByBO ? \"rgb(130, 75, 219)\" : \"white\",\n                  color: sortByBO ? \"white\" : \"rgb(130, 75, 219)\",\n                }}\n              >\n                Sort By Average Box Office\n              </Button>\n            </Col>\n          </Row>\n          <Row id=\"directors__wrapper\">\n            {displayData.map((director, index) => {\n              let newTo = {\n                pathname: baseUrl + \"/\",\n                directorIdx: director.unsortedIndex,\n              };\n              let nameJsx = (\n                <Col md={4} className=\"director__wrapper\">\n                  <Link to={newTo} key={director.name + \"_name\"}>\n                    <span className=\"directorName\">\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"16\"\n                        height=\"16\"\n                        fill=\"currentColor\"\n                        className=\"bi bi-arrow-right\"\n                        viewBox=\"0 0 16 16\"\n                      >\n                        <path\n                          fillRule=\"evenodd\"\n                          d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\"\n                        />\n                      </svg>{\" \"}\n                      {director.name}\n                    </span>\n                  </Link>\n                </Col>\n              );\n              let finalJsx = nameJsx;\n              if (sortByBO) {\n                if (index % boxOfficeBucket === 0) {\n                  let label = (\n                    <div key={index + \"_label\"}>\n                      <hr style={{ color: \"rgb(130, 75, 219)\" }} />\n                      <h3 className=\"section__title\">\n                        Directors with average box office over $\n                        {new Intl.NumberFormat().format(director.boxOfficeAvg)}:\n                      </h3>\n                    </div>\n                  );\n                  finalJsx = [label, nameJsx];\n                }\n              } else {\n                if (director.movieCnt !== lastMovieCnt) {\n                  lastMovieCnt = director.movieCnt;\n                  let label = (\n                    <div key={index + \"_label\"}>\n                      <hr style={{ color: \"rgb(130, 75, 219)\" }} />\n                      <h3 className=\"section__title\">\n                        Directors with {lastMovieCnt} movies:\n                      </h3>\n                    </div>\n                  );\n                  finalJsx = [label, nameJsx];\n                }\n              }\n              return finalJsx;\n            })}\n          </Row>\n        </Container>\n      </div>\n    </div>\n  );\n}\n","import { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport Data from \"./pages/Data\";\nimport FetchData from \"./pages/FetchData\";\nimport Landing from \"./pages/Landing\";\nimport Main from \"./pages/Main\";\nimport ParseData from \"./pages/ParseData\";\nimport \"./App.css\";\nimport \"./styles/typeface.css\";\nimport Analysis from \"./pages/Analysis\";\nimport Info from \"./pages/Info\";\nimport Catalog from \"./pages/Catalog\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <Route>\n          <Switch>\n            <Route exact path=\"/CDT-project-02/\" component={Main} />\n            <Route path=\"/CDT-project-02/analysis\" component={Analysis} />\n            <Route path=\"/CDT-project-02/catalog\" component={Catalog} />\n            <Route path=\"/CDT-project-02/info\" component={Info} />\n            <Route path=\"/data\" component={Data} />\n            <Route path=\"/fetch-data\" component={FetchData} />\n            <Route path=\"/parse-data\" component={ParseData} />\n          </Switch>\n        </Route>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const cartSlice = createSlice({\n  name: \"cart\",\n  initialState: {\n    value: [],\n  },\n  reducers: {\n    add: (state, action) => {\n      state.value.push(action.payload);\n    },\n  },\n});\n\nexport const { add } = cartSlice.actions;\nexport default cartSlice.reducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport cartReducer from \"./reducers/cart\";\n\nexport default configureStore({\n  reducer: {\n    cart: cartReducer,\n  },\n});\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\nimport App from \"./App\";\nimport store from \"./store\";\n\n// const store = createStore(rootReducer);\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}