{"version":3,"sources":["pages/Data.js","pages/FetchData.js","webgl/constants/colors.js","webgl/helper/rand.js","webgl/glsl/bg.glsl.js","webgl/constants/positions.js","webgl/class/Movie.js","webgl/glsl/box.glsl.js","webgl/webgl-app.js","utility/file.js","components/Navbar.js","utility/snippetPositions.js","pages/Main.js","pages/ParseData.js","components/EmptyAnalysis.js","pages/Analysis.js","pages/Info.js","pages/Catalog.js","App.js","reducers/cart.js","store.js","index.js"],"names":["Data","to","FetchData","btnRef","useRef","useState","downloadHref","setDownloadHref","dataJson","setData","className","ref","href","onClick","textFile","Blob","JSON","stringify","type","URL","createObjectURL","current","download","TextFile","imdbid","endIdx","Math","min","data","length","i","fetch","method","headers","then","response","json","console","log","Response","orig","push","catch","err","error","response_data","query","Title","find","d","title","rated_colors","G","Color","PG","R","Default","rand","items","random","posterPositions","xPositions","yPositions","w","h","displaceRand","Movie","movieObjs","loaders","genreObjs","font","scene","this","container","Object3D","posters","initPosters","add","posterObjs","planes","sortByBoxOffice","sort","a","b","boxOfficeInt","sortByTime","parseInt","year","curPos","forEach","movie","index","randX","randY","yIndex","findIndex","el","name","xIndex","x","y","posterMesh","initPoster","position","set","plane","initPlane","genreObj","clone","displaceX","displaceY","geometry","TextGeometry","size","height","curveSegments","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","material","MeshNormalMaterial","color","Mesh","initShaderPoster","imgLink","PlaneGeometry","texture","textureLoader","load","ShaderMaterial","vertexShader","fragmentShader","uniforms","u_time","value","uTexture","side","DoubleSide","obj","map","SpriteMaterial","sprite","Sprite","scale","planeColor","rated","u_color_r","r","u_color_g","g","u_color_b","mesh","castShadow","receiveShadow","rotationDir","rotation","models","WebGLApp","cssContainer","nameSpan","callback","setup","Scene","background","camera","PerspectiveCamera","window","innerWidth","innerHeight","lookAt","tanFOV","tan","PI","fov","renderer","WebGLRenderer","antialias","setSize","setClearColor","shadowMap","enabled","cssRenderer","CSS3DRenderer","domElement","style","top","cssElem","appendChild","htmlElem","loader","GLTFLoader","controls","OrbitControls","update","TextureLoader","clock","Clock","createCube","createLights","loadMovieGenreObjs","initPostprocessing","updateState","objs","clearState","createNewState","movieGenreObjs","init","movieObj","gsap","ease","duration","that","tl","timeline","onComplete","remove","children","target","createText","textGeometry","text","computeBoundingBox","center","textGroup","test","Group","fontLoader","loadFont","FontLoader","xhr","mod","loadModel","composer","EffectComposer","renderPass","RenderPass","addPass","luminosityPass","ShaderPass","LuminosityShader","effectFXAA","FXAAShader","renderToScreen","fileName","loaded","model","scenes","Object","keys","hasSetup","onloadCallback","BoxGeometry","MeshPhongMaterial","wireframe","cube","ambientLight","AmbientLight","pointLight","PointLight","renderScene","render","handleResize","width","clientWidth","clientHeight","aspect","updateProjectionMatrix","z","poster","getElapsedTime","rafId","requestAnimationFrame","isRendering","cancelAnimationFrame","baseUrl","NavigationBar","props","Nav","borderBottom","activeKey","Item","eventKey","snippetPositions","marginLeft","marginTop","Main","isLoading","setLoad","loadScreenRef","hasSetupSnippets","setSnippets","useEffect","textWrapper","document","querySelector","innerHTML","textContent","replace","anime","loop","targets","translateY","translateZ","delay","max_index","complete_data","directorIdx","location","undefined","localStorage","setItem","getItem","parse","currentIdx","setIdx","containerRef","cssContainerRef","webglApp","directorNameRef","cart","getWebglParams","new_index","movies","first_genre","Genre","substr","indexOf","Poster","genre","Rated","Year","boxOffice","BoxOffice","BoxOfficeInt","updateDirector","e","key","max","handleUpdateState","addEventListener","onWindowResize","removeEventListener","showNYT","setShowNYT","snippets","getElementsByClassName","opacity","snippet","id","backgroundColor","NYT_articles","article","rel","web_url","xmlns","fill","viewBox","idx","newDirector","alert","newCart","updateCart","display","complete","ParseData","outputJson","setOutputJson","directors","movie_data","imdbID","queryId","slice","bechdel","bechdel_data","rating","director","Director","movieCnt","ratingSum","avgRating","directorArr","directorObj","dir1","dir2","missingBoxOffice","directors_data","NYT_data","final_directors","finalData","dirObj","new_obj","stories","new_data","dir_w_NYT","dir","avg","mov","finalStr","substring","num","boxOfficeAvg","floor","sortedByYear","e1","e2","sortedByBoxOffice","sortedMovies","final_data","newObj","unsortedIndex","EmptyAnalysis","Analysis","initialCart","cartData","setCart","getRecommendations","recommendations","initialRecs","recs","setRecs","detailsSvgParams","marginRight","buttonStyle","Container","fluid","Row","item","Col","sm","Card","borderColor","Body","Text","Intl","NumberFormat","format","Carousel","interval","indicators","src","alt","marginBottom","Accordion","Header","fontSize","Awards","Released","Footer","Button","directorName","filter","handleRemove","textAlign","new_recs","rec","newTo","pathname","Info","Catalog","sortByBO","setSort","displayData","sortedData","lastMovieCnt","nameJsx","md","fillRule","finalJsx","App","exact","path","component","cartSlice","createSlice","initialState","reducers","state","action","payload","actions","configureStore","reducer","cartReducer","store","getElementById"],"mappings":"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","file":"static/js/main.26ca3430.chunk.js","sourcesContent":["import { Link } from \"react-router-dom\";\n\nexport default function Data() {\n  return (\n    <div>\n      <h1> Data </h1>\n      <Link to=\"/fetch-data\"> Fetch Data Page </Link>\n      <Link to=\"/parse-data\"> Parse Data Page </Link>\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport data from \"../data/not-using/bechdel-test-2010-onwards.json\";\nimport response_data from \"../data/not-using/response(all).json\";\n//import data from \"./data/bechdel-test-test.json\";\n\nexport default function FetchData() {\n  const btnRef = useRef();\n  const [downloadHref, setDownloadHref] = useState();\n  const [dataJson, setData] = useState([]);\n\n  const outputJson = () => {\n    //https://stackoverflow.com/questions/65903776/how-to-read-and-write-to-local-json-files-from-react-js\n    const TextFile = () => {\n      const textFile = new Blob([[JSON.stringify(dataJson)]], {\n        type: \"application/json\",\n      });\n      setDownloadHref(URL.createObjectURL(textFile));\n      btnRef.current.download = \"data.json\";\n    };\n\n    TextFile();\n  };\n\n  const fetchData = (imdbid) => {\n    let fetchLink =\n      \"https://movie-database-imdb-alternative.p.rapidapi.com/?i=tt\" +\n      imdbid +\n      \"&r=json&page=1\";\n    fetch(fetchLink, {\n      method: \"GET\",\n      headers: {\n        \"x-rapidapi-host\": \"movie-database-imdb-alternative.p.rapidapi.com\",\n        \"x-rapidapi-key\": \"027cff5cbfmsh439002e33664b4ap1c34c7jsn8622e3b4d4ca\",\n      },\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        console.log(data);\n        if (data.Response === \"False\") {\n          console.log(\"invalid data\");\n          return;\n        }\n        let orig = dataJson;\n        orig.push(data);\n        setData(orig);\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  };\n\n  const fetchAllData = () => {\n    const startIdx = 2500;\n    const endIdx = Math.min(3516, data.length);\n    for (let i = startIdx; i < endIdx; i++) {\n      fetchData(data[i].imdbid);\n    }\n  };\n\n  const fetchSingleData = () => {\n    const i = 199;\n    console.log(data[i]);\n    //fetchData(data[i].imdbid);\n  };\n\n  const checkData = () => {\n    console.log(\"Bechdel data length\", data.length);\n    console.log(\"Response data length\", response_data.length);\n    for (const response in response_data) {\n      const query = response_data[response].Title;\n      let f = data.find((d) => (d.title = query));\n      // console.log(query, f);\n      if (!f) {\n        console.log(\"Can't find title\", query, response_data[response]);\n      }\n    }\n  };\n\n  return (\n    <div className=\"FetchDataPage\">\n      <a ref={btnRef} href={downloadHref} onClick={outputJson}>\n        Download file\n      </a>\n      <button onClick={fetchAllData}> fetch data</button>\n      <button onClick={fetchSingleData}> fetch single data</button>\n      <button onClick={checkData}> check data</button>\n    </div>\n  );\n}\n","import { Color } from \"three\";\n\nexport const rated_colors = {\n  G: new Color(0xc4d0ff),\n  PG: new Color(0x8da4ff),\n  \"PG-13\": new Color(0xa4d9ff),\n  R: new Color(0x33cfde),\n  \"NC-17\": new Color(0x67d0fd),\n  \"TV-MA\": new Color(0x30aade),\n  \"TV-G\": new Color(0xbcebff),\n  Default: new Color(0x7c71fe),\n};\n","export function rand(items) {\n  // \"~~\" for a closest \"int\"\n  return items[~~(items.length * Math.random())];\n}\n","export const vshader = `\nvarying vec2 v_uv;\nvarying float v_wave;\nuniform float u_time;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v) {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n  \n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n  \n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n  \n  // Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n           \n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n  \n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  \n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\nvoid main() {\t\n  v_uv = uv;\n  vec3 pos = position;\n  float noiseFreq = 3.5;\n  float noiseAmp = 0.15; \n  vec3 noisePos = vec3(pos.x * noiseFreq + u_time, pos.y, pos.z);\n  pos.z += snoise(noisePos) * noiseAmp;\n  v_wave = pos.z;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0 );\n}\n`;\n\nexport const fshader = `\nuniform sampler2D uTexture;\nvarying vec2 v_uv;\nvarying float v_wave;\n\nvoid main (void)\n{\n  // these 2 lines work\n  // vec3 mapped = texture2D(uTexture, v_uv ).rgb;\n  // gl_FragColor = vec4(mapped, 1); \n\n  float wave = v_wave * 0.25;\n  float r = texture2D(uTexture, v_uv).r * 0.7;\n  float g = texture2D(uTexture, v_uv + wave/2.0).g * 0.5;\n  float b = texture2D(uTexture, v_uv + wave).b * 2.0;\n  vec3 texture = vec3(r, g, b);\n  gl_FragColor = vec4(texture, 1.0);\n}\n`;\n","// different positions for different numbers of posters\nconst pos_6 = {\n  xPositions: [-18, -12, -5, 0.5, 9, 18],\n  yPositions: [-7, -5, -3, 0, 2, 5],\n};\n\nconst pos_5 = {\n  xPositions: [-18, -7, 0, 9, 18],\n  yPositions: [-7, -3, 0, 2, 5],\n};\n\nconst pos_4 = {\n  xPositions: [-15, -5, 3, 14],\n  yPositions: [-7, -3, 2, 5],\n};\n\nconst pos_3 = {\n  xPositions: [-15, 0, 14],\n  yPositions: [-7, 0, 5],\n};\n\nconst pos_2 = {\n  xPositions: [-10, 14],\n  yPositions: [-7, 5],\n};\n\nexport const posterPositions = [{}, {}, pos_2, pos_3, pos_4, pos_5, pos_6];\n","import {\n  BoxGeometry,\n  Color,\n  DoubleSide,\n  Mesh,\n  MeshBasicMaterial,\n  MeshNormalMaterial,\n  MeshPhongMaterial,\n  NoBlending,\n  Object3D,\n  PlaneGeometry,\n  ShaderMaterial,\n  Sprite,\n  SpriteMaterial,\n  TextGeometry,\n} from \"three\";\nimport { rated_colors } from \"../constants/colors\";\nimport { rand } from \"../helper/rand\";\nimport { vshader, fshader } from \"../glsl/bg.glsl\";\nimport { box_fshader, box_vshader } from \"../glsl/box.glsl\";\nimport { FontLoader } from \"three/examples/jsm/loaders/FontLoader\";\nimport { posterPositions } from \"../constants/positions\";\n\nconst w = 5.5;\nconst h = w * 1.5;\nconst xOffset = -w * 4.5;\nconst padding = w * 1.5;\nconst yOffset_bot = -6.5;\nconst yOffset_top = 6.5;\n\nconst displaceRand = [-1, 1];\n\n/**\n * Class for the entire movie object\n */\nexport default class Movie {\n  constructor(movieObjs, loaders, genreObjs, font, scene) {\n    this.movieObjs = movieObjs;\n    this.loaders = loaders;\n    this.genreObjs = genreObjs;\n    this.font = font;\n    this.scene = scene;\n  }\n\n  init() {\n    let container = new Object3D();\n    let posters = this.initPosters();\n    container.add(posters);\n\n    return posters;\n  }\n\n  /**\n   * Private init functions\n   */\n\n  initPosters() {\n    this.posterObjs = new Object3D();\n    this.posterObjs.posters = [];\n    this.posterObjs.planes = [];\n\n    // sort movies by box office & release (ascending order)\n    let sortByBoxOffice = [...this.movieObjs].sort(function (a, b) {\n      return a.boxOfficeInt - b.boxOfficeInt;\n    });\n    let sortByTime = [...this.movieObjs].sort(function (a, b) {\n      return parseInt(a.year) - parseInt(b.year);\n    });\n    const curPos = posterPositions[this.movieObjs.length];\n    const xPositions = curPos.xPositions;\n    const yPositions = curPos.yPositions;\n\n    this.movieObjs.forEach((movie, index) => {\n      let randX = Math.random() * 2;\n      let randY = Math.random() * 2;\n\n      let yIndex = sortByBoxOffice.findIndex((el) => el.name === movie.name);\n      let xIndex = sortByTime.findIndex((el) => el.name === movie.name);\n\n      let x = xPositions[xIndex] + randX;\n      let y = yPositions[yIndex] + randY;\n\n      let posterMesh = this.initPoster(movie, x, y);\n      this.posterObjs.add(posterMesh);\n      this.posterObjs.posters.push(posterMesh);\n      posterMesh.position.set(x, y, 0);\n\n      let plane = this.initPlane(movie);\n      plane.position.set(x, y, -1);\n      this.posterObjs.add(plane);\n      this.posterObjs.planes.push(plane);\n\n      let genreObj = this.genreObjs[\"Action\"].clone(); // TO CHANGE\n      let displaceX = rand(displaceRand);\n      let displaceY = rand(displaceRand);\n      genreObj.position.set(\n        x - (w / 2) * displaceX,\n        y - (h / 2) * displaceY,\n        0.5\n      );\n      this.posterObjs.add(genreObj);\n    });\n\n    return this.posterObjs;\n  }\n\n  createCoordText(movie) {\n    const geometry = new TextGeometry(\"Hello three.js!\", {\n      font: this.font,\n      size: 80,\n      height: 5,\n      curveSegments: 12,\n      bevelEnabled: true,\n      bevelThickness: 10,\n      bevelSize: 8,\n      bevelOffset: 0,\n      bevelSegments: 5,\n    });\n    const material = new MeshNormalMaterial({ color: new Color(\"red\") });\n    const mesh = new Mesh(geometry, material);\n    return mesh;\n  }\n\n  initPoster(movie) {\n    return this.initShaderPoster(movie);\n  }\n\n  initShaderPoster(movie) {\n    let imgLink = movie.imgLink;\n    let geometry = new PlaneGeometry(w, h);\n    let texture = this.loaders.textureLoader.load(imgLink);\n\n    let material = new ShaderMaterial({\n      vertexShader: vshader,\n      fragmentShader: fshader,\n      uniforms: {\n        u_time: { value: 0.1 },\n        uTexture: { value: texture },\n      },\n      side: DoubleSide,\n    });\n\n    let mesh = new Mesh(geometry, material);\n    return mesh;\n  }\n\n  initSpritePoster(movie) {\n    let obj = new Object3D();\n    let imgLink = movie.imgLink;\n    const map = this.loaders.textureLoader.load(imgLink);\n    const material = new SpriteMaterial({ map: map, color: 0xffffff });\n    const sprite = new Sprite(material);\n    sprite.scale.set(w, h, 1);\n    obj.add(sprite);\n    return obj;\n  }\n\n  /**\n   * Init the background plane\n   */\n  initPlane(movie) {\n    // clip a WebGL geometry with it.\n    let planeColor = rated_colors[movie.rated];\n    if (!planeColor) {\n      planeColor = rated_colors.Default;\n    }\n    let material = new ShaderMaterial({\n      vertexShader: box_vshader,\n      fragmentShader: box_fshader,\n      uniforms: {\n        u_time: { value: 0.1 },\n        u_color_r: { value: planeColor.r },\n        u_color_g: { value: planeColor.g },\n        u_color_b: { value: planeColor.b },\n      },\n    });\n    var geometry = new PlaneGeometry(w * 1.2, h * 1.2);\n    var mesh = new Mesh(geometry, material);\n    mesh.castShadow = true;\n    mesh.receiveShadow = true;\n    mesh.position.set(0, 0, -1);\n    let rotationDir = rand([-1, 1]);\n    mesh.rotation.set(0, 0, 0.1 * rotationDir);\n\n    return mesh;\n  }\n}\n","export const box_vshader = `\nvarying vec2 v_uv;\nvarying float v_wave;\nuniform float u_time;\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v) {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n  \n  // First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n  \n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n  \n  // Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n           \n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n  \n  // Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  \n  // Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n}\n\n\nvoid main() {\t\n  v_uv = uv;\n  vec3 pos = position;\n  float noiseFreq = 3.5;\n  float noiseAmp = 0.15; \n  vec3 noisePos = vec3(pos.x * noiseFreq + u_time, pos.y, pos.z);\n  pos.z += snoise(noisePos) * noiseAmp;\n  v_wave = pos.z;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0 );\n}\n`;\n\nexport const box_fshader = `\nvarying vec2 v_uv;\nvarying float v_wave;\nuniform float u_color_r;\nuniform float u_color_g;\nuniform float u_color_b;\n\nvoid main (void)\n{\n  vec3 color = vec3(u_color_r, u_color_g, u_color_b);\n  gl_FragColor = vec4(color, 1.);\n}\n`;\n","import {\n  Scene,\n  Color,\n  PerspectiveCamera,\n  WebGLRenderer,\n  BoxGeometry,\n  Mesh,\n  MeshPhongMaterial,\n  AmbientLight,\n  PointLight,\n  TextureLoader,\n  Clock,\n  MeshNormalMaterial,\n  TextGeometry,\n  MeshBasicMaterial,\n  DoubleSide,\n  Group,\n} from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { CSS3DRenderer } from \"three/examples/jsm/renderers/CSS3DRenderer\";\nimport { FontLoader } from \"three/examples/jsm/loaders/FontLoader\";\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\nimport { ShaderPass } from \"three/examples/jsm/postprocessing/ShaderPass\";\nimport { FXAAShader } from \"three/examples/jsm/shaders/FXAAShader\";\nimport { LuminosityShader } from \"three/examples/jsm/shaders/LuminosityShader.js\";\nimport Movie from \"./class/Movie\";\nimport anime from \"animejs\";\nimport gsap from \"gsap/all\";\n\nconst models = [\n  \"Biography\",\n  \"Comedy\",\n  \"Action\",\n  \"Animation\",\n  // \"Crime\",\n  // \"Documentary\",\n  // \"Drama\",\n  // \"Fantasy\",\n  // \"Filmnoir\",\n  // \"History\",\n  // \"Horror\",\n  // \"Knife\",\n  // \"Mountain\",\n  // \"Musical\",\n  // \"Mystery\",\n  // \"Romance\",\n  // \"Short\",\n  // \"Superhero\",\n  // \"Ufo\",\n  // \"Warplan\",\n  // \"Western\",\n];\n\nexport default class WebGLApp {\n  constructor(container, cssContainer, nameSpan, callback) {\n    this.htmlElem = container;\n    this.cssElem = cssContainer;\n    this.nameSpan = nameSpan;\n    this.rafId = 0;\n    this.isRendering = false;\n    this.onloadCallback = callback;\n    /**\n     * Dynamically changed elements\n     */\n    this.posters = [];\n    this.movieGenreObjs = {};\n    this.hasSetup = false;\n  }\n\n  setup = (movieObjs) => {\n    const darkBlue = 0x000514;\n    const lightOrange = 0xffc48a;\n    const violet = 0xb18cff;\n    this.movieObjs = movieObjs;\n    console.log(\"set up\", this.movieObjs);\n    this.scene = new Scene();\n    this.scene.background = new Color(violet);\n    this.camera = new PerspectiveCamera(\n      75,\n      window.innerWidth / window.innerHeight,\n      0.1,\n      1000\n    );\n    this.camera.position.set(0, 0, 20);\n    this.camera.lookAt(this.scene.position);\n    // this.camera = new PerspectiveCamera(\n    //   75,\n    //   window.innerWidth / window.innerHeight,\n    //   0.1,\n    //   1000\n    // );\n    // this.camera.position.z = 5;\n    this.tanFOV = Math.tan(((Math.PI / 180) * this.camera.fov) / 2);\n    this.renderer = new WebGLRenderer({ antialias: true });\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.renderer.setClearColor(0xffffff);\n    this.renderer.shadowMap.enabled = true;\n    this.cssRenderer = new CSS3DRenderer();\n    this.cssRenderer.setSize(window.innerWidth, window.innerHeight);\n    this.cssRenderer.domElement.style.position = \"absolute\";\n    this.cssRenderer.domElement.style.top = 0;\n    this.cssElem.appendChild(this.cssRenderer.domElement);\n    this.htmlElem.appendChild(this.renderer.domElement);\n    this.loader = new GLTFLoader();\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n    this.controls.update();\n    this.textureLoader = new TextureLoader();\n    this.clock = new Clock();\n    this.createCube();\n    this.createLights();\n    this.loadMovieGenreObjs();\n    this.initPostprocessing();\n    //this.test();\n    console.log(\"Finished set up\");\n  };\n\n  updateState = (objs) => {\n    this.movieObjs = objs;\n    this.clearState();\n  };\n\n  /***\n   * PRIVATE\n   */\n\n  createNewState = () => {\n    let loaders = {\n      textureLoader: this.textureLoader,\n    };\n    let movieObj = new Movie(\n      this.movieObjs,\n      loaders,\n      this.movieGenreObjs,\n      this.font,\n      this.scene\n    );\n    let obj = movieObj.init();\n    this.movieObj = obj;\n    this.movieObj.position.y = -30;\n    this.scene.add(obj);\n    gsap.to(this.movieObj.position, {\n      y: 0,\n      ease: \"Power4.easeInOut\",\n      duration: 1,\n    });\n    console.log(\"Finished creating new state\");\n  };\n\n  clearState = () => {\n    console.log(\"Clearing state\");\n    if (this.movieObj) {\n      let that = this;\n      const callBack = () => {\n        console.log(\"Complete clear state animation\");\n        that.scene.remove(that.movieObj);\n        that.createNewState();\n      };\n\n      let tl = gsap.timeline({\n        onComplete: callBack,\n      });\n      this.movieObj.children.forEach((el, index) => {\n        let target = 50 - el.position.y;\n        tl.to(\n          el.position,\n          {\n            y: target,\n            duration: 0.7,\n            ease: \"Power4.easeInOut\",\n          },\n          index * 0.1\n        );\n      });\n    } else {\n      this.createNewState();\n    }\n  };\n\n  createText = (font) => {\n    console.log(\"In createText\");\n    const textGeometry = new TextGeometry(\"Hello world!\", {\n      font,\n      size: 0.8,\n      height: 0.3,\n      curveSegments: 4,\n      bevelEnabled: true,\n      bevelThickness: 0.05,\n      bevelSize: 0.05,\n      bevelOffset: -0.05,\n      bevelSegments: 5,\n    });\n    const material = new MeshNormalMaterial();\n    const text = new Mesh(textGeometry, material);\n    textGeometry.computeBoundingBox();\n    textGeometry.center();\n    this.textGroup.add(text);\n  };\n\n  /**\n   * Debug\n   */\n  test = () => {\n    this.textGroup = new Group();\n    this.scene.add(this.textGroup);\n    this.fontLoader.load(\n      \"https://assets.codepen.io/85648/Luckiest+Guy_Regular.json\",\n      this.createText\n    );\n  };\n\n  /**\n   * Init scene\n   */\n  loadFont = () => {\n    this.fontLoader = new FontLoader();\n    this.font = this.fontLoader.load(\n      \"assets/fonts/PPGoshaSans.json\",\n      // onLoad callback\n      function (font) {\n        // do something with the font\n        //console.log(font);\n      },\n\n      // onProgress callback\n      function (xhr) {\n        //console.log((xhr.loaded / xhr.total) * 100 + \"% loaded\");\n      },\n\n      // onError callback\n      function (err) {\n        //console.log(\"An error happened\");\n      }\n    );\n  };\n\n  loadMovieGenreObjs = () => {\n    models.forEach((mod) => this.loadModel(mod));\n  };\n\n  initPostprocessing = () => {\n    this.composer = new EffectComposer(this.renderer);\n    const renderPass = new RenderPass(this.scene, this.camera);\n    this.composer.addPass(renderPass);\n    const luminosityPass = new ShaderPass(LuminosityShader);\n    this.composer.addPass(luminosityPass);\n    const effectFXAA = new ShaderPass(FXAAShader);\n    effectFXAA.uniforms[\"resolution\"].value.set(\n      1 / window.innerWidth,\n      1 / window.innerHeight\n    );\n    effectFXAA.renderToScreen = true;\n    this.composer.addPass(effectFXAA);\n  };\n\n  loadModel = (fileName) => {\n    const scl = 15;\n    let that = this;\n    this.loader.load(\n      \"assets/\" + fileName + \".gltf\",\n      function (loaded) {\n        let model = loaded.scenes[0];\n        model.scale.set(scl, scl, scl);\n        that.movieGenreObjs[fileName] = model;\n        //console.log(\"Added model\", loaded);\n        if (Object.keys(that.movieGenreObjs).length === models.length) {\n          that.updateState(that.movieObjs);\n          that.hasSetup = true;\n          that.onloadCallback(false);\n        }\n      },\n      (load) => {},\n      (error) => {\n        console.log(\"error! \", error);\n      }\n    );\n  };\n\n  createCube = () => {\n    const boxSize = 50;\n    let geometry = new BoxGeometry(boxSize, boxSize, boxSize);\n    let material = new MeshPhongMaterial({\n      color: new Color(0x7c71fe),\n      wireframe: true,\n    });\n    this.cube = new Mesh(geometry, material);\n    this.scene.add(this.cube);\n    console.log(\"created cube\", this.cube);\n  };\n\n  createLights = () => {\n    this.ambientLight = new AmbientLight(0xffffff);\n    this.scene.add(this.ambientLight);\n    this.pointLight = new PointLight(0xffffff);\n    this.scene.add(this.pointLight);\n  };\n\n  renderScene = () => {\n    // this.composer.render();\n    this.renderer.render(this.scene, this.camera);\n    this.cssRenderer.render(this.scene, this.camera);\n  };\n\n  handleResize = () => {\n    this.renderer.width = this.htmlElem.clientWidth;\n    this.renderer.height = this.htmlElem.clientHeight;\n    this.renderer.setSize(this.renderer.width, this.renderer.height);\n    this.camera.aspect = this.renderer.width / this.renderer.height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  update = () => {\n    this.cube.rotation.x += 0.01;\n    this.cube.rotation.y += 0.0125;\n    this.cube.rotation.z += 0.012;\n    this.controls.update();\n\n    if (this.movieObj) {\n      this.movieObj.posters.forEach((poster, index) => {\n        if (poster.material.uniforms) {\n          poster.material.uniforms.u_time.value = this.clock.getElapsedTime();\n        }\n        if (this.movieObj.planes[index].material.uniforms) {\n          this.movieObj.planes[index].material.uniforms.u_time.value =\n            this.clock.getElapsedTime();\n        }\n      });\n      //this.movieObj.planes.forEach((plane) => wiggleMesh(plane));\n    }\n\n    //this.controls.update();\n    this.rafId = requestAnimationFrame(this.update);\n    this.renderScene();\n  };\n\n  render = (render) => {\n    if (this.isRendering === render) return;\n    this.isRendering = render;\n    if (render) {\n      this.update();\n    } else {\n      cancelAnimationFrame(this.rafId);\n    }\n  };\n}\n","export const baseUrl = \"/CDT-project-02\";\n","import { Nav } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { baseUrl } from \"../utility/file\";\n\nexport default function NavigationBar(props) {\n  const handleSelect = (eventKey) => console.log(`selected ${eventKey}`);\n  const svgParams = {\n    width: 20,\n    height: 20,\n  };\n\n  return (\n    <Nav\n      className=\"justify-content-end\"\n      style={{ borderBottom: \"1px solid rgb(130, 75, 219)\" }}\n      activeKey={props.activeKey}\n      // onSelect={handleSelect}\n    >\n      <Nav.Item>\n        <Link\n          style={{ color: props.color }}\n          className={props.activeKey === 1 ? \"active\" : \"\"}\n          eventKey=\"1\"\n          to={baseUrl + \"/\"}\n        >\n          Gallery\n        </Link>\n      </Nav.Item>\n      <Nav.Item>\n        <Link\n          style={{ color: props.activeKey === 2 ? \"white\" : props.color }}\n          eventKey=\"2\"\n          to={baseUrl + \"/catalog\"}\n          className={props.activeKey === 2 ? \"active\" : \"\"}\n        >\n          Catalog\n        </Link>\n      </Nav.Item>\n      <Nav.Item>\n        <Link\n          to={baseUrl + \"/info\"}\n          className={props.activeKey === 3 ? \"active\" : \"\"}\n          style={{ color: props.activeKey === 3 ? \"white\" : props.color }}\n          eventKey=\"3\"\n        >\n          Info\n        </Link>\n      </Nav.Item>\n      <Nav.Item>\n        <Link\n          to={baseUrl + \"/analysis\"}\n          className={props.activeKey === 4 ? \"active\" : \"\"}\n          eventKey=\"4\"\n          style={{ color: props.activeKey === 4 ? \"white\" : props.color }}\n        >\n          Analysis\n        </Link>\n      </Nav.Item>\n    </Nav>\n  );\n}\n","export const snippetPositions = [\n  { marginLeft: \"-60vw\", marginTop: \"-40vh\" },\n  { marginLeft: \"-50vw\", marginTop: \"30vh\" },\n  { marginLeft: \"50vw\", marginTop: \"-65vh\" },\n  { marginLeft: \"10vw\", marginTop: \"-40vh\" },\n  { marginLeft: \"65vw\", marginTop: \"55vh\" },\n];\n","import { useEffect, useRef, useState } from \"react\";\nimport WebGLApp from \"../webgl/webgl-app\";\nimport \"../styles/main.css\";\nimport complete_data from \"../data/final-data.json\";\nimport anime from \"animejs\";\n\n// redux\nimport NavigationBar from \"../components/Navbar\";\nimport { snippetPositions } from \"../utility/snippetPositions\";\n\nexport default function Main(props) {\n  // debug\n  const DISPLAY_LOADING = false;\n\n  // loading\n  const [isLoading, setLoad] = useState(true);\n  const loadScreenRef = useRef(null);\n  const [hasSetupSnippets, setSnippets] = useState(false);\n\n  useEffect(() => {\n    var textWrapper = document.querySelector(\".load-text .letters\");\n    textWrapper.innerHTML = textWrapper.textContent.replace(\n      /\\S/g,\n      \"<span class='letter'>$&</span>\"\n    );\n\n    anime.timeline({ loop: true }).add({\n      targets: \".load-text .letter\",\n      translateY: [\"1.1em\", 0],\n      translateZ: 0,\n      duration: 750,\n      delay: (el, i) => 80 * i,\n    });\n  }, []);\n\n  // navigating directors\n  const max_index = complete_data.length - 1;\n  var directorIdx = 0; // actual reference to number\n  if (\n    props.location.directorIdx !== null &&\n    props.location.directorIdx !== undefined\n  ) {\n    directorIdx = props.location.directorIdx;\n    localStorage.setItem(\"directorIdx\", JSON.stringify(directorIdx));\n  } else if (localStorage.getItem(\"directorIdx\")) {\n    directorIdx = JSON.parse(localStorage.getItem(\"directorIdx\"));\n  } else {\n    localStorage.setItem(\"directorIdx\", JSON.stringify(directorIdx));\n  }\n\n  const [currentIdx, setIdx] = useState(directorIdx); // used to trigger re-render\n\n  // webgl\n  const containerRef = useRef(null);\n  const cssContainerRef = useRef(null);\n  const webglApp = useRef(null);\n  const directorNameRef = useRef(null);\n\n  // redux\n  let cart = useRef([]);\n\n  useEffect(() => {\n    if (localStorage.getItem(\"cart\")) {\n      cart.current = JSON.parse(localStorage.getItem(\"cart\"));\n    } else {\n      localStorage.setItem(\"cart\", JSON.stringify([]));\n    }\n  }, []);\n\n  function updateCart() {\n    // get current director idx from db\n    let idx = 0;\n    if (localStorage.getItem(\"directorIdx\")) {\n      idx = JSON.parse(localStorage.getItem(\"directorIdx\"));\n    } else {\n      localStorage.setItem(\"directorIdx\", 0); // shouldn't happen\n    }\n    console.log(\"Update cart with director index\", idx);\n\n    // create new cart\n    let orig = JSON.parse(localStorage.getItem(\"cart\"));\n    let newDirector = complete_data[idx];\n\n    // no dups\n    if (orig.find((el) => el.name === newDirector.name)) {\n      alert(\"Already selected! Find someone else. ;-)\");\n      return;\n    }\n\n    let newCart = [...orig];\n    newCart.push(newDirector);\n    const MAX_DIRECTORS = 4;\n\n    // cap number\n    if (newCart.length > MAX_DIRECTORS) {\n      alert(\"You can only select a maximum of 4 directors to compare. :-)\");\n      return;\n    }\n\n    // update db\n    localStorage.setItem(\"cart\", JSON.stringify(newCart));\n  }\n\n  function handleAddDirector() {\n    updateCart();\n  }\n\n  function getWebglParams(new_index) {\n    let movieObjs = complete_data[new_index].movies.map((movie) => {\n      let first_genre = movie.Genre.substr(0, movie.Genre.indexOf(\",\"));\n      return {\n        imgLink: movie.Poster,\n        genre: first_genre === \"\" ? movie.Genre : first_genre,\n        rated: movie.Rated,\n        year: movie.Year,\n        boxOffice: movie.BoxOffice,\n        boxOfficeInt: movie.BoxOfficeInt,\n        name: movie.Title,\n      };\n    });\n    return movieObjs;\n  }\n\n  function handleUpdateState(new_index) {\n    localStorage.setItem(\"directorIdx\", new_index);\n    webglApp.current.updateState(getWebglParams(new_index));\n  }\n\n  function updateDirector(e) {\n    let new_index;\n    if (e.key === \"ArrowDown\") {\n      new_index = Math.min(directorIdx + 1, max_index);\n    } else if (e.key === \"ArrowUp\") {\n      new_index = Math.max(directorIdx - 1, 0);\n    } else {\n      return;\n    }\n    if (new_index === directorIdx) return;\n    directorIdx = new_index;\n    setIdx(new_index);\n    handleUpdateState(new_index);\n  }\n\n  useEffect(() => {\n    if (DISPLAY_LOADING) return;\n    if (containerRef.current === null) return;\n    if (webglApp.current !== null) return;\n\n    function onWindowResize() {\n      webglApp.current.handleResize();\n    }\n\n    webglApp.current = new WebGLApp(\n      containerRef.current,\n      cssContainerRef.current,\n      directorNameRef.current,\n      setLoad\n    );\n    webglApp.current.setup(getWebglParams(currentIdx));\n    webglApp.current.render(true);\n    window.addEventListener(\"resize\", onWindowResize, false);\n    window.addEventListener(\"keydown\", updateDirector, false);\n\n    return () => {\n      webglApp.current.render(false);\n      window.removeEventListener(\"resize\", onWindowResize, false);\n      window.removeEventListener(\"keydown\", updateDirector, false);\n    };\n  }, []);\n\n  // toggle NYT articles\n  const [showNYT, setShowNYT] = useState(false);\n\n  function handleToggleNYT() {\n    let orig = showNYT;\n    let display = !orig;\n    anime\n      .timeline({\n        complete: function () {\n          setShowNYT(display);\n        },\n      })\n      .add({\n        targets: \".article__snippet\",\n        translateY: [\"1.1em\", 0],\n        translateZ: 0,\n        opacity: display ? \"100%\" : 0,\n        duration: 200,\n        delay: (el, i) => 50 * i,\n      });\n  }\n\n  useEffect(() => {\n    let snippets = [...document.getElementsByClassName(\"article__snippet\")];\n    if (snippets.length === 0) return;\n    if (hasSetupSnippets) return;\n    console.log(snippets);\n    let opacity = showNYT ? \"100%\" : 0;\n    snippets.forEach((snippet) => (snippet.style.opacity = opacity));\n    setSnippets(true);\n  });\n\n  return (\n    <div id=\"main__wrapper\">\n      <div id=\"webgl\" ref={containerRef}></div>\n      <div id=\"css\" ref={cssContainerRef}></div>\n      <div className=\"root\" id=\"vis__text\" ref={directorNameRef}>\n        {!isLoading && <NavigationBar activeKey={1} color=\"white\" />}\n\n        <div\n          className=\"center__container\"\n          id=\"loading__screen\"\n          ref={loadScreenRef}\n          style={{\n            backgroundColor: \"rgb(127, 61, 233)\",\n            opacity: isLoading || DISPLAY_LOADING ? \"100%\" : \"0\",\n            height: isLoading || DISPLAY_LOADING ? \"100vh\" : \"0\",\n          }}\n        >\n          <h1 className=\"load-text\">\n            <span className=\"text-wrapper\">\n              <span className=\"letters\">Loading Bech(ideal) ...</span>\n            </span>\n          </h1>\n        </div>\n\n        {!isLoading && (\n          <div className=\"min-vh-90\" id=\"director__vis__content\">\n            <div className=\"vline\" id=\"y__axis\">\n              <span>Box Office</span>\n            </div>\n            <hr id=\"x__axis\" />\n            <span id=\"x__axis__label\"> Time </span>\n            <div className=\"center__container min-vh-90\">\n              <h1 id=\"director_name\">{complete_data[currentIdx].name}</h1>\n\n              {complete_data[currentIdx].NYT_articles.map((article, index) => (\n                <div\n                  className=\"article__snippet\"\n                  style={snippetPositions[index]}\n                  key={index}\n                >\n                  <p>{article.snippet}</p>\n                  <a\n                    className=\"btn\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    href={article.web_url}\n                  >\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"16\"\n                      height=\"16\"\n                      fill=\"rgb(147, 117, 255)\"\n                      className=\"bi bi-link-45deg\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path d=\"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z\" />\n                      <path d=\"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z\" />\n                    </svg>{\" \"}\n                    Read More\n                  </a>\n                </div>\n              ))}\n            </div>\n\n            <div id=\"footer\">\n              <div>\n                <button className=\"btn btn-light\" onClick={handleAddDirector}>\n                  Add director{\" \"}\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    fill=\"white\"\n                    className=\"bi bi-bookmark-plus\"\n                    viewBox=\"0 0 16 16\"\n                  >\n                    <path d=\"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z\" />\n                    <path d=\"M8 4a.5.5 0 0 1 .5.5V6H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V7H6a.5.5 0 0 1 0-1h1.5V4.5A.5.5 0 0 1 8 4z\" />\n                  </svg>{\" \"}\n                </button>\n              </div>\n              <div>\n                <button\n                  className=\"btn btn-light\"\n                  style={{\n                    backgroundColor: showNYT ? \"white\" : \"rgb(165, 119, 240)\",\n                    color: !showNYT ? \"white\" : \"rgb(165, 119, 240)\",\n                  }}\n                  onClick={handleToggleNYT}\n                >\n                  Toggle Articles{\" \"}\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    width=\"16\"\n                    height=\"16\"\n                    fill={showNYT ? \"rgb(165, 119, 240)\" : \"white\"}\n                    className=\"bi bi-eye\"\n                    viewBox=\"0 0 16 16\"\n                  >\n                    <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\" />\n                    <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\" />\n                  </svg>{\" \"}\n                </button>{\" \"}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport movie_data from \"../data/not-using/response(all).json\";\nimport bechdel_data from \"../data/not-using/bechdel-test-2010-onwards.json\";\nimport directors_data from \"../data/directors-w-NYT.json\";\n// merge\nimport final_directors from \"../data/main-data.json\";\nimport NYT_data from \"../data/NYT-articles.json\";\n// get box office\nimport dir_w_NYT from \"../data/directors-w-NYT.json\";\n// add index\nimport final_data from \"../data/final-data.json\";\n\nexport default function ParseData() {\n  const btnRef = useRef();\n  const [downloadHref, setDownloadHref] = useState();\n  const [outputJson, setOutputJson] = useState([]);\n\n  const compileOutput = () => {\n    //https://stackoverflow.com/questions/65903776/how-to-read-and-write-to-local-json-files-from-react-js\n    const TextFile = () => {\n      const textFile = new Blob([[JSON.stringify(outputJson)]], {\n        type: \"application/json\",\n      });\n      setDownloadHref(URL.createObjectURL(textFile));\n      btnRef.current.download = \"data.json\";\n    };\n\n    TextFile();\n  };\n\n  const parseData = () => {\n    let directors = {}; // each entry contains {name: ..., movies: [], ratings: 0};\n    let actors = {}; // each entry contains {name: ..., movies: []};\n    let movies = movie_data;\n    for (var i = 0; i < movies.length; i++) {\n      let movie = movie_data[i];\n      if (!movie.imdbID) {\n        continue;\n      }\n      let queryId = movie[\"imdbID\"].slice(2);\n      let bechdel = bechdel_data.find((b) => b.imdbid === queryId);\n      if (!bechdel) {\n        console.log(\"Couldn't find bechdel\", queryId);\n        continue;\n      }\n      if (bechdel.rating !== 3) {\n        continue;\n      }\n      let director = movie.Director;\n      if (director === \"N/A\") {\n        continue;\n      }\n      if (!directors[director]) {\n        directors[director] = {\n          movieCnt: 0,\n          movies: [],\n          ratingSum: 0,\n          avgRating: 0,\n          name: director,\n        };\n      }\n      directors[director].movieCnt += 1;\n      directors[director].movies.push(movie);\n      directors[director].ratingSum += bechdel.rating; // divide by numMovies for avg rating\n    }\n\n    let directorArr = [];\n\n    for (const director in directors) {\n      let directorObj = directors[director];\n      directorObj.avgRating = directorObj.ratingSum / directorObj.movies.length;\n      if (directorObj.movies.length > 2) {\n        directorArr.push(directorObj);\n      }\n    }\n\n    directorArr.sort((dir1, dir2) => {\n      let ret = dir1.movieCnt > dir2.movieCnt ? -1 : 1;\n      return ret; // all movies with rating of 3\n    });\n\n    // setOutputJson(directorArr);\n\n    let missingBoxOffice = [];\n    directors_data.forEach((director) => {\n      director.movies.forEach((movie) => {\n        if (movie.BoxOffice === \"N/A\") {\n          missingBoxOffice.push(movie.Title);\n        }\n      });\n    });\n\n    setOutputJson(missingBoxOffice);\n  };\n\n  function mergeData() {\n    console.log(NYT_data.length, final_directors.length);\n    let finalData = [];\n\n    for (let i = 0; i < final_directors.length; i++) {\n      let dirObj = final_directors[i];\n      let NYT_articles = NYT_data.find((el) => el.name === dirObj.name);\n      if (!NYT_articles) {\n        console.log(\"could not find article for \", dirObj.name);\n        continue;\n      }\n      let new_obj = dirObj;\n      new_obj.NYT_articles = NYT_articles.stories;\n      finalData.push(new_obj);\n    }\n\n    console.log(finalData);\n    setOutputJson(finalData);\n  }\n\n  function analyzeBoxOffice() {\n    let new_data = [];\n    dir_w_NYT.forEach((dir) => {\n      let avg = 0;\n      let movieCnt = 0;\n      let new_obj = dir;\n      new_obj.movies.forEach((mov, index) => {\n        let str = mov.BoxOffice; // sample:  \"BoxOffice\": \"$74,262,031\"\n        let removeComma = str.replace(/,/g, \"\");\n        let finalStr = removeComma.substring(1);\n        let num = parseInt(finalStr);\n        new_obj.movies[index].BoxOfficeInt = num;\n        avg += num;\n        movieCnt++;\n      });\n      avg /= movieCnt;\n      new_obj.boxOfficeAvg = Math.floor(avg);\n      let sortedByYear = [...new_obj.movies].sort(function (e1, e2) {\n        return parseInt(e1.Year) - parseInt(e2.Year);\n      });\n      let sortedByBoxOffice = [...new_obj.movies].sort(function (e1, e2) {\n        return parseInt(e1.BoxOfficeInt) - parseInt(e2.BoxOfficeInt);\n      });\n      new_obj.sortedMovies = {};\n      new_obj.sortedMovies[\"sortedByYear\"] = sortedByYear;\n      new_obj.sortedMovies[\"sortedByBoxOffice\"] = sortedByBoxOffice;\n      new_data.push(new_obj);\n    });\n    console.log(new_data);\n    setOutputJson(new_data);\n  }\n\n  function addIndex() {\n    let new_data = [];\n    final_data.forEach((dir, index) => {\n      let newObj = dir;\n      newObj.unsortedIndex = index;\n      new_data.push(newObj);\n    });\n    setOutputJson(new_data);\n  }\n\n  return (\n    <div>\n      <a ref={btnRef} href={downloadHref} onClick={compileOutput}>\n        Download file\n      </a>\n      <button onClick={parseData}> Parse Data</button>\n      <button onClick={mergeData}> Merge Data</button>\n      <button onClick={analyzeBoxOffice}> Count Box Office</button>\n      <button onClick={addIndex}> Add Index </button>\n    </div>\n  );\n}\n","export default function EmptyAnalysis() {\n  return (\n    <div>\n      <p className=\"page__description\">\n        You have not chosen any directors yet. Select up to 4 directors that you\n        are interested in learning more about which of their movies passed the\n        bechdel test.\n      </p>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport {\n  Card,\n  Carousel,\n  Col,\n  Container,\n  Row,\n  Button,\n  Accordion,\n} from \"react-bootstrap\";\nimport EmptyAnalysis from \"../components/EmptyAnalysis\";\nimport NavigationBar from \"../components/Navbar\";\nimport \"../styles/analysis.css\";\nimport complete_data from \"../data/final-data.json\";\nimport { rand } from \"../webgl/helper/rand\";\nimport { Link } from \"react-router-dom\";\nimport { baseUrl } from \"../utility/file\";\n\nexport default function Analysis() {\n  let initialCart = JSON.parse(localStorage.getItem(\"cart\"));\n  if (!initialCart) {\n    initialCart = [];\n    localStorage.setItem(\"cart\", JSON.stringify([])); // shouldn't happen\n  }\n  const [cartData, setCart] = useState(initialCart);\n\n  function handleRemove(directorName) {\n    console.log(\"removing director\", directorName);\n    let newCart = cartData.filter(function (el) {\n      return el.name !== directorName;\n    });\n    localStorage.setItem(\"cart\", JSON.stringify(newCart));\n    setCart(newCart);\n  }\n\n  function getRecommendations() {\n    let recommendations = [];\n    for (let i = 0; i < 3; i++) {\n      recommendations.push(rand(complete_data));\n    }\n    return recommendations;\n  }\n\n  let initialRecs = getRecommendations();\n  const [recs, setRecs] = useState(initialRecs);\n\n  function handleChangeRec() {\n    let new_recs = getRecommendations();\n    setRecs(new_recs);\n  }\n\n  const size = \"25px\";\n  const detailsSvgParams = {\n    width: size,\n    height: size,\n    marginRight: \".5vw\",\n  };\n  const buttonStyle = {};\n\n  return (\n    <div id=\"analysis__root\">\n      <NavigationBar activeKey={4} color=\"rgb(130, 75, 219)\" />\n\n      <div id=\"analysis__content\" className=\"content__wrapper page__root\">\n        <h1 className=\"title\">Your top directors</h1>\n\n        {cartData.length === 0 && <EmptyAnalysis />}\n\n        {cartData.length !== 0 && (\n          <div>\n            <Container id=\"directors__wrapper\" fluid>\n              <Row>\n                {cartData.map((item, index) => (\n                  <Col sm={3} key={item.name + index}>\n                    <Card style={{ borderColor: \"rgb(130, 75, 219)\" }}>\n                      <Card.Body>\n                        <Card.Title className=\"directorName\">\n                          {item.name}\n                        </Card.Title>\n                        <Card.Text> {item.movieCnt} passing movies</Card.Text>\n                        <Card.Text>\n                          Average box office: $\n                          {new Intl.NumberFormat().format(item.boxOfficeAvg)}\n                        </Card.Text>\n                        <Carousel interval={5000000} indicators={false}>\n                          {item.movies.map((movieObj) => (\n                            <Carousel.Item key={movieObj.Title}>\n                              <img\n                                className=\"d-block w-100\"\n                                src={movieObj.Poster}\n                                alt=\"First slide\"\n                                style={{ marginBottom: \"1vh\" }}\n                              />\n                              <Accordion>\n                                <Accordion.Item eventKey=\"0\">\n                                  <Accordion.Header className=\"movieTitle\">\n                                    <span style={{ fontSize: \"1vw\" }}>\n                                      {movieObj.Title}\n                                    </span>\n                                  </Accordion.Header>\n                                  <Accordion.Body>\n                                    <p className=\"movieBoxoffice roundedBg\">\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        style={detailsSvgParams}\n                                        fill=\"currentColor\"\n                                        className=\"bi bi-bank2\"\n                                        viewBox=\"0 0 16 16\"\n                                      >\n                                        <path d=\"M8.277.084a.5.5 0 0 0-.554 0l-7.5 5A.5.5 0 0 0 .5 6h1.875v7H1.5a.5.5 0 0 0 0 1h13a.5.5 0 1 0 0-1h-.875V6H15.5a.5.5 0 0 0 .277-.916l-7.5-5zM12.375 6v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zM8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM.5 15a.5.5 0 0 0 0 1h15a.5.5 0 1 0 0-1H.5z\" />\n                                      </svg>{\" \"}\n                                      {movieObj.BoxOffice}\n                                    </p>\n                                    <p className=\"movieAwards roundedBg\">\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        style={detailsSvgParams}\n                                        fill=\"currentColor\"\n                                        className=\"bi bi-trophy-fill\"\n                                        viewBox=\"0 0 16 16\"\n                                      >\n                                        <path d=\"M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5zm.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935z\" />\n                                      </svg>{\" \"}\n                                      {movieObj.Awards}\n                                    </p>\n                                    <p className=\"roundedBg\">\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        style={detailsSvgParams}\n                                        fill=\"currentColor\"\n                                        className=\"bi bi-clock-fill\"\n                                        viewBox=\"0 0 16 16\"\n                                      >\n                                        <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z\" />\n                                      </svg>{\" \"}\n                                      {movieObj.Released}\n                                    </p>\n                                    <p className=\"movieGenre\">\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        style={detailsSvgParams}\n                                        fill=\"currentColor\"\n                                        className=\"bi bi-hash\"\n                                        viewBox=\"0 0 16 16\"\n                                      >\n                                        <path d=\"M8.39 12.648a1.32 1.32 0 0 0-.015.18c0 .305.21.508.5.508.266 0 .492-.172.555-.477l.554-2.703h1.204c.421 0 .617-.234.617-.547 0-.312-.188-.53-.617-.53h-.985l.516-2.524h1.265c.43 0 .618-.227.618-.547 0-.313-.188-.524-.618-.524h-1.046l.476-2.304a1.06 1.06 0 0 0 .016-.164.51.51 0 0 0-.516-.516.54.54 0 0 0-.539.43l-.523 2.554H7.617l.477-2.304c.008-.04.015-.118.015-.164a.512.512 0 0 0-.523-.516.539.539 0 0 0-.531.43L6.53 5.484H5.414c-.43 0-.617.22-.617.532 0 .312.187.539.617.539h.906l-.515 2.523H4.609c-.421 0-.609.219-.609.531 0 .313.188.547.61.547h.976l-.516 2.492c-.008.04-.015.125-.015.18 0 .305.21.508.5.508.265 0 .492-.172.554-.477l.555-2.703h2.242l-.515 2.492zm-1-6.109h2.266l-.515 2.563H6.859l.532-2.563z\" />\n                                      </svg>\n                                      {movieObj.Genre}\n                                    </p>\n                                  </Accordion.Body>\n                                </Accordion.Item>\n                              </Accordion>\n                            </Carousel.Item>\n                          ))}\n                        </Carousel>\n                      </Card.Body>\n                      <Card.Footer\n                        style={{ backgroundColor: \" rgb(231, 206, 255)\" }}\n                      >\n                        <Button\n                          style={buttonStyle}\n                          onClick={() => handleRemove(item.name)}\n                        >\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            style={detailsSvgParams}\n                            fill=\"currentColor\"\n                            className=\"bi bi-x-lg\"\n                            viewBox=\"0 0 16 16\"\n                          >\n                            <path\n                              fill-rule=\"evenodd\"\n                              d=\"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z\"\n                            />\n                            <path\n                              fill-rule=\"evenodd\"\n                              d=\"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z\"\n                            />\n                          </svg>\n                        </Button>\n                      </Card.Footer>\n                    </Card>\n                  </Col>\n                ))}\n              </Row>\n            </Container>\n            <Container\n              className=\"justify-content-md-center min-vw-100\"\n              id=\"recommendation__wrapper\"\n              style={{ textAlign: \"center\" }}\n            >\n              <button style={buttonStyle} onClick={handleChangeRec}>\n                Shuffle Suggestions{\" \"}\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"16\"\n                  height=\"16\"\n                  fill=\"currentColor\"\n                  className=\"bi bi-arrow-left-right\"\n                  viewBox=\"0 0 16 16\"\n                >\n                  <path\n                    fill-rule=\"evenodd\"\n                    d=\"M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z\"\n                  />\n                </svg>\n              </button>\n              <h1 className=\"sub__title\">You May Also Like:</h1>\n              <Row>\n                {recs.map((rec) => {\n                  console.log(rec);\n                  let newTo = {\n                    pathname: baseUrl + \"/\",\n                    directorIdx: rec.unsortedIndex,\n                  };\n\n                  return (\n                    <Col key={rec.name}>\n                      <Link to={newTo}>\n                        <span className=\"rec__name\">\n                          <svg\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            style={detailsSvgParams}\n                            fill=\"currentColor\"\n                            className=\"bi bi-camera-reels-fill\"\n                            viewBox=\"0 0 16 16\"\n                          >\n                            <path d=\"M6 3a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\" />\n                            <path d=\"M9 6a3 3 0 1 1 0-6 3 3 0 0 1 0 6z\" />\n                            <path d=\"M9 6h.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 7.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 16H2a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h7z\" />\n                          </svg>{\" \"}\n                          {rec.name}\n                        </span>\n                      </Link>\n                    </Col>\n                  );\n                })}\n              </Row>\n            </Container>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import NavigationBar from \"../components/Navbar\";\nimport \"../styles/info.css\";\n\nexport default function Info() {\n  return (\n    <div>\n      <NavigationBar color=\"rgb(130, 75, 219)\" activeKey={3} />\n      <div className=\"content__wrapper\">\n        <h1 className=\"title\">Info</h1>\n        <div className=\"page__root\"> </div>\n      </div>\n    </div>\n  );\n}\n","import Button from \"@restart/ui/esm/Button\";\nimport anime from \"animejs\";\nimport { useState } from \"react\";\nimport { Col, Row, Container } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport NavigationBar from \"../components/Navbar\";\nimport complete_data from \"../data/final-data.json\";\nimport \"../styles/catalog.css\";\nimport { baseUrl } from \"../utility/file\";\n\nexport default function Catalog() {\n  const boxOfficeBucket = 20;\n  const [sortByBO, setSort] = useState(false);\n  const [displayData, setData] = useState(complete_data);\n  let sortedData = [...complete_data].sort(function (a, b) {\n    return b.boxOfficeAvg - a.boxOfficeAvg;\n  }); // descending order\n  let lastMovieCnt = 0;\n\n  const handleSort = () => {\n    const sort = !sortByBO;\n    const new_data = sort ? sortedData : complete_data;\n    function callBack() {\n      setSort(sort);\n      setData(new_data);\n    }\n\n    anime\n      .timeline({\n        complete: callBack,\n      })\n      .add({\n        targets: \"#directors__wrapper\",\n        translateY: [\"1.5em\", 0],\n        duration: 500,\n      });\n  };\n\n  return (\n    <div>\n      <NavigationBar activeKey={2} color=\"rgb(130, 75, 219)\" />\n\n      <div id=\"catalog__content\" className=\"content__wrapper page__root\">\n        <h1 className=\"title\">Catalog</h1>\n        <p className=\"page__description\">\n          This is a comprehensive catalog of {complete_data.length} directors\n          displayed on this website.\n          <br /> You can sort the list of directors by their movies' average box\n          office.\n          <br /> Clicking on a director's name brings you to the data\n          visualization of that particular director.\n        </p>\n\n        <Container fluid>\n          <Row className=\"justify-content-md-center\">\n            <Col>\n              <Button\n                type=\"checkbox\"\n                onClick={handleSort}\n                style={{\n                  backgroundColor: sortByBO ? \"rgb(130, 75, 219)\" : \"white\",\n                  color: sortByBO ? \"white\" : \"rgb(130, 75, 219)\",\n                }}\n              >\n                Sort By Average Box Office\n              </Button>\n            </Col>\n          </Row>\n          <Row id=\"directors__wrapper\">\n            {displayData.map((director, index) => {\n              let newTo = {\n                pathname: baseUrl + \"/\",\n                directorIdx: director.unsortedIndex,\n              };\n              let nameJsx = (\n                <Col md={4} className=\"director__wrapper\">\n                  <Link to={newTo} key={director.name + \"_name\"}>\n                    <span className=\"directorName\">\n                      <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"16\"\n                        height=\"16\"\n                        fill=\"currentColor\"\n                        className=\"bi bi-arrow-right\"\n                        viewBox=\"0 0 16 16\"\n                      >\n                        <path\n                          fillRule=\"evenodd\"\n                          d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\"\n                        />\n                      </svg>{\" \"}\n                      {director.name}\n                    </span>\n                  </Link>\n                </Col>\n              );\n              let finalJsx = nameJsx;\n              if (sortByBO) {\n                if (index % boxOfficeBucket === 0) {\n                  let label = (\n                    <div key={index + \"_label\"}>\n                      <hr style={{ color: \"rgb(130, 75, 219)\" }} />\n                      <h3 className=\"section__title\">\n                        Directors with average box office over $\n                        {new Intl.NumberFormat().format(director.boxOfficeAvg)}:\n                      </h3>\n                    </div>\n                  );\n                  finalJsx = [label, nameJsx];\n                }\n              } else {\n                if (director.movieCnt !== lastMovieCnt) {\n                  lastMovieCnt = director.movieCnt;\n                  let label = (\n                    <div key={index + \"_label\"}>\n                      <hr style={{ color: \"rgb(130, 75, 219)\" }} />\n                      <h3 className=\"section__title\">\n                        Directors with {lastMovieCnt} movies:\n                      </h3>\n                    </div>\n                  );\n                  finalJsx = [label, nameJsx];\n                }\n              }\n              return finalJsx;\n            })}\n          </Row>\n        </Container>\n      </div>\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport Data from \"./pages/Data\";\nimport FetchData from \"./pages/FetchData\";\nimport Landing from \"./pages/Landing\";\nimport Main from \"./pages/Main\";\nimport ParseData from \"./pages/ParseData\";\nimport \"./App.css\";\nimport \"./styles/typeface.css\";\nimport Analysis from \"./pages/Analysis\";\nimport Info from \"./pages/Info\";\nimport Catalog from \"./pages/Catalog\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <Route>\n          <Switch>\n            <Route exact path=\"/CDT-project-02\" component={Main} />\n            <Route path=\"/CDT-project-02/analysis\" component={Analysis} />\n            <Route path=\"/CDT-project-02/catalog\" component={Catalog} />\n            <Route path=\"/CDT-project-02/info\" component={Info} />\n            <Route path=\"/data\" component={Data} />\n            <Route path=\"/fetch-data\" component={FetchData} />\n            <Route path=\"/parse-data\" component={ParseData} />\n          </Switch>\n        </Route>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const cartSlice = createSlice({\n  name: \"cart\",\n  initialState: {\n    value: [],\n  },\n  reducers: {\n    add: (state, action) => {\n      state.value.push(action.payload);\n    },\n  },\n});\n\nexport const { add } = cartSlice.actions;\nexport default cartSlice.reducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport cartReducer from \"./reducers/cart\";\n\nexport default configureStore({\n  reducer: {\n    cart: cartReducer,\n  },\n});\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore } from \"redux\";\nimport App from \"./App\";\nimport store from \"./store\";\n\n// const store = createStore(rootReducer);\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}